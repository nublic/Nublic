# Nublic file watcher Daemon
#
# The Nublic notification daemon manages signalling apps when
# user data is added, modified or deleted in Nublic

description     "Nublic file watcher daemon"

env APP_MUSIC_SETTINGS='/etc/nublic/nublic_app_music.cfg:/etc/nublic/nublic_app_music_db.cfg'
env APP_PHOTOS_SETTINGS='/etc/nublic/nublic_app_photos.cfg:/etc/nublic/nublic_app_photos_db.cfg'

start on (filesystem and started nublic-file-watcher-internal)
stop on (shutdown or stopping nublic-file-watcher-internal)

respawn

script
    DATE=`date`
    echo "" >> /var/log/nublic-file-watcher.log
    echo "Starting filewatcher daemon [${DATE}$]" >> /var/log/nublic-file-watcher.log
    /usr/sbin/nublic-file-watcher-daemon >> /var/log/nublic-file-watcher.log 2>&1
end script
