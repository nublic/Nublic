/*!
 * projekktor zwei V 0.8.17 
 * http://www.projekktor.com
 * Copyright 2010, Sascha Kluger, Spinning Airwhale Media, http://www.spinningairwhale.com
 * under GNU General Public License
 * http://www.projekktor.com/license/
 *
 * You can use, modify and distribute the software, but do so in the spirit of Open Source.
 * You need to leave the copyright notices intact.
 * You need to be able to share any modifications you make to the Projekktor source (not the software Projekktor is integrated to).
 * Give credit where credit is due, spread the word, link to us if you can.
 */var playerModelVIDEOFLASH=function(){};var playerModelAUDIOFLASH=function(){};jQuery(function(a){playerModelVIDEOFLASH.prototype={requiresFlash:9,allowRandomSeek:false,flashVerifyMethod:"api_get",_jarisVolume:0,applyMedia:function(b){var c={id:this.controller.getMediaContainerId()+"_flash",name:this.controller.getMediaContainerId()+"_flash",src:this.controller.getItemConfig("playerFlashMP4"),width:"100%",height:"100%",allowScriptAccess:"always",allowFullScreen:"true",allowNetworking:"all",wmode:"transparent",bgcolor:"#000000",FlashVars:{source:this.media.file,type:"video",streamtype:this.controller.getItemConfig("flashStreamType"),server:(this.controller.getItemConfig("flashStreamType")=="rtmp")?this.controller.getItemConfig("flashRTMPServer"):"",autostart:"false",hardwarescaling:"true",controls:"false",jsapi:"true"}};switch(this.controller.getItemConfig("flashStreamType")){case"rtmp":case"http":this.allowRandomSeek=true;this.media.loadProgress=100;break}this.createFlash(c,b)},addListeners:function(){this.mediaElement.api_addlistener("onprogress","projekktor('"+this.controller.getId()+"').playerModel.progressListener");this.mediaElement.api_addlistener("ontimeupdate","projekktor('"+this.controller.getId()+"').playerModel.timeListener");this.mediaElement.api_addlistener("ondatainitialized","projekktor('"+this.controller.getId()+"').playerModel.startListener");this.mediaElement.api_addlistener("onplaypause","projekktor('"+this.controller.getId()+"').playerModel._playpauseListener");this.mediaElement.api_addlistener("onplaybackfinished","projekktor('"+this.controller.getId()+"').playerModel.endedListener");this.mediaElement.api_addlistener("onmute","projekktor('"+this.controller.getId()+"').playerModel.volumeListener");this.mediaElement.api_addlistener("onvolumechange","projekktor('"+this.controller.getId()+"').playerModel.volumeListener");this.mediaElement.api_addlistener("onbuffering","projekktor('"+this.controller.getId()+"').playerModel.waitingListener");this.mediaElement.api_addlistener("onnotbuffering","projekktor('"+this.controller.getId()+"').playerModel.canplayListener");this.mediaElement.api_addlistener("onnotbuffering","projekktor('"+this.controller.getId()+"').playerModel.canplayListener");this.mediaElement.api_addlistener("onconnectionfailed","projekktor('"+this.controller.getId()+"').playerModel.errorListener")},removeListeners:function(){try{this.mediaElement.api_removelistener("*")}catch(b){}},_playpauseListener:function(b){if(b.isplaying){this.playingListener()}else{this.pauseListener()}},setSeek:function(c){try{this.mediaElement.api_seek(c)}catch(b){}},setVolume:function(b){try{this.mediaElement.api_volume(b)}catch(c){}},setPause:function(b){try{this.mediaElement.api_pause()}catch(c){}},setPlay:function(b){try{this.mediaElement.api_play()}catch(c){}},getVolume:function(){return this._jarisVolume},errorListener:function(b){this.setTestcard(4)},volumeListener:function(b){if(this._jarisVolume!=b.volume){this._jarisVolume=b.volume;this.sendUpdate("volume")}}};playerModelAUDIOFLASH.prototype=a.extend(true,{},playerModelVIDEOFLASH.prototype,{applyMedia:function(c){var b=a(document.createElement("div")).attr({id:this.controller.getMediaContainerId()+"_cover"});c.append(b);this.imageElement=this.applyImage(this.controller.getItemConfig("cover")||this.controller.getItemConfig("poster"),c);var d=a(document.createElement("div")).attr({id:this.controller.getMediaContainerId()+"_movie"});c.append(d);var e={id:this.controller.getMediaContainerId()+"_flash",name:this.controller.getMediaContainerId()+"_flash",src:this.controller.getItemConfig("playerFlashMP4"),width:"1px",height:"1px",allowScriptAccess:"always",allowFullScreen:"true",allowNetworking:"all",wmode:"transparent",bgcolor:"#000000",FlashVars:{source:this.media.file,type:"audio",streamtype:this.controller.getItemConfig("flashStreamType"),server:(this.controller.getItemConfig("flashStreamType")=="rtmp")?this.controller.getItemConfig("flashRTMPServer"):"",autostart:"false",hardwarescaling:"false",controls:"false",jsapi:"true"}};this.createFlash(e,d)}})});var playerModelVIDEO=function(){};var playerModelAUDIO=function(){};jQuery(function(a){playerModelVIDEO.prototype={allowRandomSeek:false,videoWidth:0,videoHeight:0,applyMedia:function(b){this.elementReady=false;if(this.media.mediaType.indexOf("/ogg")>-1){this.allowRandomSeek=true}this.mediaElement=a(document.createElement("video")).appendTo(b).attr({id:this.controller.getMediaContainerId()+"_html",src:this.media.file,controls:false,autoplay:true,autobuffer:false,loop:false}).css({width:"100%",height:"100%"});this.waitforPlayer()},waitforPlayer:function(){if(this.elementReady==true){return}var d=this;var b=a("#"+this.controller.getMediaContainerId()+"_html");try{if(b==undefined){setTimeout(function(){d.waitforPlayer()},200);return}if(b[0].networkState==undefined){setTimeout(function(){d.waitforPlayer()},200);return}}catch(c){setTimeout(function(){d.waitforPlayer()},200);return}this.mediaElement=b;this.addListeners();this.elementReady=true},addListeners:function(){var b=this;this.mediaElement.bind("loadedmetadata",function(){b.loadedMetaDataListener(this)});this.mediaElement.bind("pause",function(){b.pauseListener(this)});this.mediaElement.bind("playing",function(){b.startListener(this)});this.mediaElement.bind("play",function(){b.playingListener(this)});this.mediaElement.bind("volumechange",function(){b.volumeListener(this)});this.mediaElement.bind("progress",function(c){b.progressListener(c,this)});this.mediaElement.bind("timeupdate",function(){b.timeListener(this)});this.mediaElement.bind("ended",function(){b.endedListener(this)});this.mediaElement.bind("waiting",function(){b.waitingListener(this)});this.mediaElement.bind("canplaythrough",function(){b.canplayListener(this)});this.mediaElement.bind("canplay",function(){b.canplayListener(this)});this.mediaElement.bind("error",function(c){b.errorListener(c,this)});this.mediaElement.bind("suspend",function(){b.suspendListener(this)})},loadedMetaDataListener:function(c){try{this.videoWidth=c.videoWidth;this.videoHeight=c.videoHeight}catch(b){}this._scaleVideo()},updatePlayerInfo:function(){var c=this;var b=4;try{if(this.getState()!=="IDLE"){if(a.browser.opera){b=3}if(this.mediaElement[0].networkState==b&&this.mediaElement[0].networkState!=undefined){this.errorListener()}setTimeout(function(){c.updatePlayerInfo()},500)}}catch(d){}},detachMedia:function(){try{a(this.mediaElement[0]).attr("src","");this.mediaElement[0].load()}catch(b){}},setPlay:function(){try{this.mediaElement[0].play()}catch(b){}this.updatePlayerInfo()},setPause:function(){try{this.mediaElement[0].pause()}catch(b){}},setVolume:function(b){try{this.mediaElement.attr("volume",b)}catch(c){}},setSeek:function(c){try{this.mediaElement.attr("currentTime",c)}catch(b){}},setFullscreen:function(b){this._scaleVideo()},setResize:function(){this._scaleVideo()},_scaleVideo:function(){var d=this.controller.getMediaContainer();try{var f=d.width();var h=d.height();var b=this.videoWidth;var c=this.videoHeight;this.stretch(this.controller.getItemConfig("videoScaling"),this.mediaElement,f,h,b,c)}catch(g){}}};playerModelAUDIO.prototype=a.extend(true,{},playerModelVIDEO.prototype,{allowRandomSeek:false,imageElement:{},applyMedia:function(b){this.imageElement=this.applyImage(this.controller.getItemConfig("cover")||this.controller.getItemConfig("poster"),b);this.mediaElement=a(document.createElement("audio")).appendTo(b).attr({id:this.controller.getId()+"_media_html",src:this.media.file,controls:false,autoplay:false,autobuffer:false,loop:false}).css({width:"1px",height:"1px"});if(this.media.mediaType.indexOf("/ogg")>-1){this.allowRandomSeek=true}this.waitforPlayer()}})});var playerModelHTML=function(){};jQuery(function(a){playerModelHTML.prototype={_autoNext:null,applyMedia:function(c){var b=this;this.mediaElement=a(document.createElement("iframe")).attr({id:this.controller.getMediaContainerId()+"_iframe",name:this.controller.getMediaContainerId()+"_iframe",src:this.media.file,scrolling:"no",frameborder:"0",width:"100%",height:"100%"}).css({overflow:"hidden",border:"0px",width:"100%",height:"100%"}).appendTo(c);this.mediaElement.load(function(d){b.success()});this.mediaElement.error(function(d){b.remove()})},detachMedia:function(){clearTimeout(this._autoNext);this.mediaElement.remove()},success:function(){var b=this;if(this.media.duration>0){this._autoNext=setTimeout(function(){b.setPlay()},this.media.duration*1000)}this.elementReady=true},remove:function(){this.mediaElement.remove();this.elementReady=true},setPause:function(){this.pauseListener()},setPlay:function(){this.playingListener()}}});var playerModelIMAGE=function(){};jQuery(function(a){playerModelIMAGE.prototype={applyMedia:function(b){this.mediaElement=this.applyImage(this.media.file,b);this.elementReady=true},setPlay:function(){this._setState("completed")}}});var playerModel=function(){};jQuery(function(a){playerModel.prototype={_states:{idle:"IDLE",awakening:"AWAKENING",paused:"PAUSED",playing:"PLAYING",starting:"STARTING",buffering:"BUFFERING",completed:"COMPLETED",stopped:"STOPPED",error:"ERROR"},_bufferStates:{empty:"EMPTY",full:"FULL",done:"DONE"},_currentState:null,_currentBufferState:null,_KbPerSec:0,_bandWidthTimer:null,_isPoster:false,_isPlaying:false,_modelName:"player",requiresFlash:false,preventOverlays:false,hasGUI:false,isAutoslide:false,allowRandomSeek:false,flashVerifyMethod:"api_get",elementReady:false,mediaElement:null,controller:{},media:{duration:0,position:0,startOffset:0,file:false,poster:"",ended:false,message:"",error:null,mediaType:"",loadProgress:0,errorCode:0,message:"",type:"NA",volume:0},init:function(b){this.controller=b.controller||null;this.media=b.media||this.media;this._modelName=b.model;this.displayItem(b.autoplay)},displayItem:function(b){if(b!==true||this.getState()==="STOPPED"){this._setState("idle");this.applyImage(this.getPoster(),this.controller.getMediaContainer().html(""));this._isPoster=true;this.elementReady=true}else{if(this.requiresFlash!==false){if(this.requiresFlash>this.controller.getFlashVersion()){this.setTestcard(6);return}}this.elementReady=false;this._isPoster=false;this.applyMedia(this.controller.getMediaContainer().html(""))}this.waitTillReady(b)},applyMedia:function(){},sendUpdate:function(b,c){this.controller._modelUpdateListener(b,c)},waitTillReady:function(c){var b=this;(function(){try{if(b.elementReady!==true){setTimeout(arguments.callee,70);return}}catch(d){}if(b.getState()!=="STOPPED"||c===true){try{b.addListeners()}catch(d){}}b.controller._modelUpdateListener("displayReady");if(c===true){b.setPlay()}})()},addListeners:function(){},removeListeners:function(){try{this.mediaElement.unbind()}catch(b){}},detachMedia:function(){},destroy:function(){this.removeListeners();this.detachMedia();try{a("#"+this.mediaElement.id).empty();a("#"+this.mediaElement.id).remove()}catch(b){}this.controller.getMediaContainer().html("");this.mediaElement=null},reInit:function(){if(this.requiresFlash===false||!(a.browser.mozilla)||this.getState()==="ERROR"||this.controller.getItemConfig("bypassFlashFFFix")===true){this.flashReinitListener();return}this.sendUpdate("FFreinit");this.removeListeners();this.displayItem((this.getState()!=="IDLE"))},applyCommand:function(c,b){switch(c){case"play":if(this.getState()==="IDLE"){this._setState("awakening");this.displayItem(true);break}this.setPlay();break;case"pause":this.setPause();break;case"volume":this.setVolume(b);break;case"stop":this.detachMedia();this.destroy();this._setState("stopped");this.displayItem(false);break;case"seek":if(this.media.loadProgress==-1){break}this.setSeek(b);break;case"fullscreen":this.sendUpdate("fullscreen",b);this.setFullscreen(b);this.reInit();break;case"resize":this.setResize();break}},setPrev:function(){},setNext:function(){},setSeek:function(b){},setPlay:function(){},setPause:function(){},setVolume:function(b){},setFullscreen:function(b){},setResize:function(){},getVolume:function(){var b=this.mediaElement.attr("muted");return(b==true)?0:this.mediaElement.attr("volume")},getLoadProgress:function(){return this.media.loadProgress},getLoadPlaybackProgress:function(){return this.media.playProgress},getPosition:function(){return this.media.position},getDuration:function(){return this.media.duration},getInFullscreen:function(){return this.controller.getInFullscreen()},getIsAutoslide:function(){return this.isAutoslide},getKbPerSec:function(){return this._KbPerSec},getIsPlaying:function(){return this._isPlaying},getState:function(){return(this._currentState==null)?this._states.idle:this._currentState},getFile:function(){return this.media.file||null},getModelName:function(){return this._modelName||null},getHasGUI:function(){return(this.hasGUI&&!this._isPoster)},getIsReady:function(){return this.elementReady},getPoster:function(){return this.controller.getItemConfig("poster")},timeListener:function(e){if(e==undefined){return}var d=(e.position!=undefined)?e.position:e.currentTime;var c=e.duration;var b=(d>0&&c>0)?d*100/c:0;this.media.duration=this._roundNumber(c,2);this.media.position=this._roundNumber(d,2);this.media.playProgress=b;this.sendUpdate("time",this.media.position);this.loadProgressUpdate()},loadProgressUpdate:function(){try{if(typeof this.mediaElement[0].buffered!=="object"){return}var d=this.mediaElement[0];var b=Math.round(d.buffered.end(d.buffered.length-1)*100)/100;var c=b*100/this.media.duration;if(c==this.media.loadProgress){return}this.media.loadProgress=(this.allowRandomSeek===true)?100:-1;this.media.loadProgress=(this.media.loadProgress<100||this.media.loadProgress==undefined)?c:100;this.sendUpdate("progress",this.media.loadProgress)}catch(f){}},progressListener:function(c,h){try{if(typeof this.mediaElement[0].buffered=="object"){this.mediaElement.unbind("progress");return}}catch(g){}if(this._bandWidthTimer==null){this._bandWidthTimer=(new Date()).getTime()}var f=0;var d=0;if(!isNaN(c.loaded/c.total)){f=c.loaded;d=c.total}else{if(c.originalEvent&&!isNaN(c.originalEvent.loaded/c.originalEvent.total)){f=c.originalEvent.loaded;d=c.originalEvent.total}else{if(h&&!isNaN(h.loaded/h.total)){f=h.loaded;d=h.total}else{try{}catch(g){}}}}var b=(f>0&&d>0)?f*100/d:0;if(Math.round(b)>Math.round(this.media.loadProgress)){this._KbPerSec=((f/1024)/(((new Date()).getTime()-this._bandWidthTimer)/1000))}b=(this.media.loadProgress!==100)?b:100;b=(this.allowRandomSeek===true)?100:b;if(this.media.loadProgress!=b){this.media.loadProgress=b;this.sendUpdate("progress",b)}if(this.media.loadProgress>=100&&this.allowRandomSeek==false){this._setBufferState("full")}},endedListener:function(b){this._setState("completed")},suspendListener:function(b){},waitingListener:function(b){this._setBufferState("empty")},canplayListener:function(b){this._setBufferState("full")},canplaythroughListener:function(b){this._setBufferState("full")},suspendListener:function(b){this._setBufferState("full")},playingListener:function(b){if(!this._isPlaying){this._setState("starting")}this._isPlaying=true;this._setState("playing")},startListener:function(b){this.setVolume(this.controller.getItemConfig("volume"));this._setState("playing")},pauseListener:function(b){this._setState("paused")},volumeListener:function(b){this.sendUpdate("volume")},flashReadyListener:function(){this.elementReady=true},flashReinitListener:function(){try{if(a.browser.mozilla){this.mediaElement.api_source(this.media.file);if(this.getState()==="PLAYING"){this.setPlay()}}this.addListeners();this.elementReady=true}catch(b){}},errorListener:function(b,d){try{switch(b.target.error.code){case b.target.error.MEDIA_ERR_ABORTED:this.setTestcard(1);break;case b.target.error.MEDIA_ERR_NETWORK:this.setTestcard(2);break;case b.target.error.MEDIA_ERR_DECODE:this.setTestcard(3);break;case b.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:this.setTestcard(4);break;default:this.setTestcard(5);break}}catch(c){}},setTestcard:function(f,b){var e=this.controller.getMediaContainer();var d=this.controller.getItemConfig("messages");var c=(d[f]!=undefined)?d[f]:d[0];c=(b!=undefined&&b!="")?b:c;if(this.controller.getItemCount()>1){c+=d[99]}if(c.length<3){c="ERROR"}if(f==100){c=""}e.attr("style","width: 100%; height:100%;");e.html("");this.mediaElement=a(document.createElement("div")).attr({"class":"pptestcard"}).appendTo(e);if(c.length>0){a(document.createElement("p")).appendTo(this.mediaElement).html(c)}this._setState("error")},applyImage:function(d,b){var e=this;var f=a(document.createElement("img")).hide();if(d==""||d==undefined){f=a(document.createElement("span")).attr({id:this.controller.getMediaContainerId()+"_image"}).appendTo(b);return f}f.appendTo(b).attr({id:this.controller.getMediaContainerId()+"_image",src:d});f.error(function(g){a(this).remove()});if(a.browser.msie){(function(){try{if(f[0].complete!=null&&f[0].complete==true){f.show();e.stretch(e.controller.getItemConfig("imageScaling"),f,b.width(),b.height());return}setTimeout(arguments.callee,500)}catch(g){setTimeout(arguments.callee,500)}})()}else{f.load(function(g){a(this).show();e.stretch(e.controller.getItemConfig("imageScaling"),a(this),b.width(),b.height())})}var c=function(){if(f.is(":visible")===false){e.controller.removeListener("fullscreen",arguments.callee)}e.stretch(e.controller.getItemConfig("imageScaling"),f,b.width(),b.height())};this.controller.addListener("fullscreen",c);this.controller.addListener("resize",c);return f},stretch:function(b,d,n,l,f,h){if(d==undefined){return}if(d._originalDimensions===undefined){d._originalDimensions={};d._originalDimensions={width:d.width(),height:d.height()}}var g=(f!==undefined)?f:d._originalDimensions.width;var c=(h!==undefined)?h:d._originalDimensions.height;var j=n/g;var m=l/c;var e=0;var k=0;switch(b){case"fill":if(j<=m){e=g*j;k=c*j}else{e=g*m;k=c*m}break;case"aspectratio":default:if(j>m){e=g*m;k=c*m}else{e=g*j;k=c*j}break}d.css({margin:0,padding:0,width:Math.ceil(e/n)*100+"%",height:Math.ceil(k/l)*100+"%",left:Math.floor((n/2-e/2)/n*100)+"%",top:Math.floor((l/2-k/2)/l*100)+"%"})},toAttributeString:function(c){var d="";for(var b in c){if(b.toUpperCase()==="FLASHVARS"){continue}if(typeof c[b]!="function"){d+=b+'="'+c[b]+'" '}}return d},toFlashvarsString:function(d){var f="";var e="";for(var c in d){if(typeof d[c]!="function"){e=d[c];for(var b in this.media){if(typeof e!="string"){continue}e=e.replace("{"+b+"}",this.media[b])}f+=c+"="+encodeURIComponent(e)+"&"}}return f.replace(/&$/,"")},createFlash:function(h,b){var f=(h.FlashVars===null)?this.controller.getItemConfig("flashVars"):h.FlashVars;if(f){f=this.toFlashvarsString(f);if(f.length>0){h.src+="?"+f}}var e="";var d="";var c="";var g="";if(a.browser.msie){g=' id="'+h.id+'" '}var d="<object"+g+' codebase="https://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0"  name="'+h.name+'" width="'+h.width+'" height="'+h.height+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">';d+='<param name="movie" value="'+h.src+'"></param>';d+='<param name="allowScriptAccess" value="'+h.allowScriptAccess+'"></param>';d+='<param name="allowFullScreen" value="'+h.allowFullScreen+'"></param>';d+='<param name="wmode" value="'+h.wmode+'"></param>';var c="<embed "+this.toAttributeString(h)+' pluginspage="http://www.macromedia.com/go/getflashplayer" swliveconnect="true" type="application/x-shockwave-flash"></embed>';e=d+c;e+="</object>";if(a.browser.mozilla){e=c}b[0].innerHTML=e;this.mediaElement=a("#"+h.id)[0];this._waitforPlayer()},_waitforPlayer:function(){if(this.elementReady==true){return}var b=this;(function(){try{if(b.mediaElement==undefined){setTimeout(arguments.callee,100)}else{if(b.mediaElement[b.flashVerifyMethod]==undefined){setTimeout(arguments.callee,100)}else{b.flashReadyListener()}}}catch(c){setTimeout(arguments.callee,100)}})()},_roundNumber:function(b,c){if(b<=0||isNaN(b)){return 0}return Math.round(b*Math.pow(10,c))/Math.pow(10,c)},_setState:function(b){if(this._currentState!=this._states[b]){this._currentState=this._states[b].toUpperCase();this.sendUpdate("state",this._states[b].toUpperCase())}},_setBufferState:function(b){if(this._currentBufferState!=this._bufferStates[b]){this._currentBufferState=this._bufferStates[b].toUpperCase();this.sendUpdate("buffer",this._bufferStates[b].toUpperCase())}}}});var playerModelNA=function(){};jQuery(function(a){playerModelNA.prototype={hasGUI:true,applyMedia:function(b){if(this.controller.getItemConfig("enableTestcard")){this.setTestcard((this.media.file!==""&&this.media.errorCode===7)?5:this.media.errorCode);this.elementReady=true}else{this.elementReady=true;this.applyCommand("stop");window.location.href=this.media.file}},setPlay:function(){this.sendUpdate("start")},setPause:function(){if(this._hasEnded==false){this._hasEnded=true;this.sendUpdate("ended")}}}});var playerModelPLAYLIST=function(){};jQuery(function(a){playerModelPLAYLIST.prototype={applyMedia:function(b){this.elementReady=true},setPlay:function(){this.sendUpdate("playlist",this.media.file)}}});var playerModelVIDEOJWFLASH=function(){};jQuery(function(a){playerModelVIDEOJWFLASH.prototype={requiresFlash:9,flashVerifyMethod:"api_get",flashVerifyMethod:"getConfig",hasGUI:true,_isMuted:false,_isStarted:false,applyMedia:function(b){var c={id:this.controller.getMediaContainerId()+"_media_flash",name:this.controller.getMediaContainerId()+"_media_flash",src:this.controller.getItemConfig("playerFlashMP4"),width:"100%",height:"100%",allowScriptAccess:"always",quality:"height",allowFullScreen:"true",wmode:"normal",bgcolor:"#111111",FlashVars:{file:this.media.file,backcolor:"00044B",frontcolor:"d5e0f7",lightcolor:"FFFFFF",screencolor:"000000",stretching:"fill",bufferlength:5,autostart:"true"}};this.createFlash(c,b)},flashReadyListener:function(){this.addListeners();this.elementReady=true},addListeners:function(){this.mediaElement.addControllerListener("VOLUME","projekktor('"+this.controller.getId()+"').playerModel.volumeListener");this.mediaElement.addControllerListener("MUTE","projekktor('"+this.controller.getId()+"').playerModel._muteListener");this.mediaElement.addModelListener("STATE","projekktor('"+this.controller.getId()+"').playerModel._stateListener");this.mediaElement.addModelListener("TIME","projekktor('"+this.controller.getId()+"').playerModel.timeListener");this.mediaElement.addModelListener("LOADED","projekktor('"+this.controller.getId()+"').playerModel.progressListener");this.mediaElement.addModelListener("ERROR","projekktor('"+this.controller.getId()+"').playerModel.errorListener");this.mediaElement.addModelListener("BUFFER","projekktor('"+this.controller.getId()+"').playerModel._bufferListener")},_muteListener:function(b){this._isMuted=false;try{if(b.state===true){this._isMuted=true}}catch(c){}this.volumeListener()},_stateListener:function(b){switch(b.newstate){case"COMPLETED":this.endedListener();break;case"PLAYING":if(this._isStarted===false){this._isStarted=true;this.startListener();break}this.playingListener();break;case"PAUSED":this.pauseListener();break;case"BUFFERING":this.waitingListener();break}},removeListeners:function(){try{this.mediaElement.removeControllerListener("VOLUME","projekktor('"+this.controller.getId()+"').playerModel.volumeListener");this.mediaElement.removeControllerListener("MUTE","projekktor('"+this.controller.getId()+"').playerModel._muteListener");this.mediaElement.removeModelListener("STATE","projekktor('"+this.controller.getId()+"').playerModel._stateListener");this.mediaElement.removeModelListener("TIME","projekktor('"+this.controller.getId()+"').playerModel.timeListener");this.mediaElement.removeModelListener("LOADED","projekktor('"+this.controller.getId()+"').playerModel.progressListener");this.mediaElement.removeModelListener("ERROR","projekktor('"+this.controller.getId()+"').playerModel.errorListener");this.mediaElement.removeModelListener("BUFFER","projekktor('"+this.controller.getId()+"').playerModel._bufferListener")}catch(b){}},setSeek:function(b){this.mediaElement.sendEvent("SEEK",b)},setVolume:function(b){this.mediaElement.sendEvent("VOLUME",b*100)},setPause:function(b){this.mediaElement.sendEvent("PAUSE",true)},setPlay:function(b){this.mediaElement.sendEvent("PLAY",true)},getVolume:function(){if(this._isMuted===true){return 0}return this.mediaElement.getConfig().volume/100},errorListener:function(b){this.setTestcard(0,b.message+"<br/>")}}});var playerModelVIDEO_MOBILE_APPLE=function(){};jQuery(function(a){playerModelVIDEO_MOBILE_APPLE.prototype=a.extend(true,{},playerModelVIDEO.prototype,{displayItem:function(b){if(this.elementReady!==true){this.applyMedia(this.controller.getMediaContainer().html(""));this.elementReady=true;this.waitTillReady(b)}},applyMedia:function(b){this.mediaElement=a(document.createElement("video")).appendTo(b).attr({id:this.controller.getMediaContainerId()+"_html",src:this.media.file,poster:this.controller.getItemConfig("poster"),controls:"controls"}).css({width:"100%",height:"100%"})},setFullscreen:function(b){},_scaleVideo:function(){}})});var playerModelYOUTUBE=function(){};jQuery(function(a){playerModelYOUTUBE.prototype={requiresFlash:8,allowRandomSeek:true,flashVerifyMethod:"cueVideoById",_updateTimer:null,applyMedia:function(b){var c={id:this.controller.getMediaContainerId()+"_youtube",name:this.controller.getMediaContainerId()+"_youtube",src:"http://www.youtube.com/apiplayer",width:"100%",height:"100%",bgcolor:"#000000",allowScriptAccess:"always",wmode:"transparent",FlashVars:{enablejsapi:1}};this.createFlash(c,b)},flashReadyListener:function(){this._youtubeResizeFix();this.addListeners();this.mediaElement.cueVideoById(this.youtubeGetId())},flashReinitListener:function(){this._youtubeResizeFix();this.addListeners();if(a.browser.mozilla){this.mediaElement.cueVideoById(this.youtubeGetId());if(this.getState()==="PLAYING"){this.setPlay()}}this.elementReady=true},_youtubeResizeFix:function(){a(this.mediaElement).attr({width:"99.99999%",height:"99.9999%"});this.applyCommand("volume",this.controller.getItemConfig("volume"))},addListeners:function(){this.mediaElement.addEventListener("onStateChange","projekktor('"+this.controller.getId()+"').playerModel.youtubeStateChangeListener");this.mediaElement.addEventListener("onError","projekktor('"+this.controller.getId()+"').playerModel.errorListener")},setSeek:function(c){clearTimeout(this._updateTimer);try{this.mediaElement.seekTo(c,true)}catch(b){}},setVolume:function(b){try{this.mediaElement.setVolume(b*100)}catch(c){}this.volumeListener({})},setPause:function(b){try{this.mediaElement.pauseVideo()}catch(c){}},setPlay:function(b){try{this.mediaElement.playVideo()}catch(c){}},getVolume:function(){try{return this.mediaElement.getVolume()/100}catch(b){}return 0},getPoster:function(){return this.media.config["poster"]||this.controller.config.poster||"http://img.youtube.com/vi/"+this.youtubeGetId()+"/0.jpg"},errorListener:function(b){this.setTestcard(4)},youtubeStateChangeListener:function(b){clearTimeout(this._updateTimer);if(this.mediaElement===null){return}switch(b){case -1:break;case 0:this.endedListener({});break;case 1:this.playingListener({});this.canplayListener({});this.updatePlayerInfo();break;case 2:this.pauseListener({});break;case 3:this.waitingListener({});break;case 5:this.youtubeGetTitle();break}},youtubeGetTitle:function(){if(this.media.title||this.controller.config.title||this.elementReady){this.elementReady=true;return}var b=this;a.ajax({url:"http://gdata.youtube.com/feeds/api/videos/"+this.youtubeGetId()+"?v=2&alt=jsonc",complete:function(f,c){try{data=f.responseText;if(typeof data=="string"){data=a.parseJSON(data)}if(data.data.title){b.sendUpdate("config",{title:data.data.title+" ("+data.data.uploader+")"})}}catch(d){}b.elementReady=true}})},youtubeGetId:function(){return encodeURIComponent(this.media.file.replace(/^[^v]+v.(.{11}).*/,"$1"))},updatePlayerInfo:function(){var b=this;clearTimeout(this._updateTimer);(function(){try{if(b.getState()!=="IDLE"&&b.getState()!=="COMPLETED"){b.timeListener({position:b.mediaElement.getCurrentTime(),duration:b.mediaElement.getDuration()});b.progressListener({loaded:b.mediaElement.getVideoBytesLoaded(),total:b.mediaElement.getVideoBytesTotal()});b._updateTimer=setTimeout(arguments.callee,1000)}}catch(c){}})()}}});var playerModelYOUTUBE_MOBILE_APPLE=function(){};jQuery(function(a){playerModelYOUTUBE_MOBILE_APPLE.prototype={displayItem:function(b){if(this.elementReady!==true){this.applyMedia(this.controller.getMediaContainer().html(""));this.elementReady=true;this.waitTillReady(b)}},applyMedia:function(b){var d=this.media.file.replace(/^[^v]+v.(.{11}).*/,"$1");var c='<object width="100%" height="100%"><param name="movie" value="http://www.youtube.com/v/'+d+'"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/'+d+'" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="100%" height="100%"></embed></object>';b.html(c);this.elementReady=true},setFullscreen:function(b){},_scaleVideo:function(){}}});jQuery(function($){if($.browser.msie){(function(){if(!
/*@cc_on!@*/
0){return}var e="div,audio,video,source".split(",");for(var i=0;i<e.length;i++){document.createElement(e[i])}})();if(!Array.prototype.indexOf){Array.prototype.indexOf=function(obj,start){for(var i=(start||0),j=this.length;i<j;i++){if(this[i]==obj){return i}}return -1}}}var projekktors=[];function Iterator(arr){this.length=arr.length;this.each=function(fn){$.each(arr,fn)};this.size=function(){return arr.length}}window.projekktor=window.$p=function(){var arg=arguments[0];var instance=null;if(!arguments.length){return projekktors[0]||null}if(typeof arg=="number"){return projekktors[arg]}if(typeof arg=="string"){if(arg=="*"){return new Iterator(projekktors)}$.each(projekktors,function(){try{if(this.getId()==arg.id||this.getId()==arg||this.getParent()==arg){instance=this}}catch(e){}});if(instance!==null){return instance}}if(instance===null){var cfg=arguments[1]||{};if(typeof arg=="string"){var count=0;var player;$.each($(arg),function(){player=new PPlayer($(this),cfg);projekktors.push(player);count++});return(count>1)?new Iterator(projekktors):player}else{if(arg){projekktors.push(new PPlayer($(this),cfg));return new Iterator(projekktors)}}}return null;function PPlayer(srcNode,cfg){this.config=$.extend({cookieName:"projekktor",cookieExpiry:356,plugins:["Startbutton","Controlbar","Bufferingicon"],version:"0.8.17",reelParser:function(data){return data},cssClassPrefix:"pp",platformPriority:["native","flash"],playerFlashMP4:"jarisplayer.swf",playerFlashMP3:"jarisplayer.swf",enableFlashFallback:true,enableNativePlayback:true,enableKeyboard:true,enableFullscreen:true,enableTestcard:true,bypassFlashFFFix:false,defaultPoster:"default-poster.jpg",forceFullViewport:false,sandBox:false,loop:false,autoplay:false,continuous:true,poster:false,title:"",allowPlaybackFrom:[],dynamicTypeExtensions:false,FilePosterSeparator:";",messages:{0:"An unknown error occurred. ",1:"You aborted the media playback. ",2:"A network error caused the media download to fail part-way. ",3:"The media playback was aborted due to a corruption problem. ",4:"The media could not be loaded, either because the server or network failed or because the format is not supported. ",5:"Sorry, your browser does not support the media format of the requested file.",6:"You need to update your Flash Plugin to a newer version!",7:"No media scheduled.",8:"! Invalid media model configured !",97:"No media scheduled.",98:"Invalid or malformed playlist data!",99:"Click display to proceed. "},debug:false,debugLevel:1,desginGrid:"style/layout_grid.gif",designMode:false,ID:0,controls:false,start:false,stop:false,volume:0.5,cover:"",disablePause:false,disallowSkip:false,fixedVolume:false,imageScaling:"aspectratio",videoScaling:"aspectratio",flashVideoModel:"videoflash",flashAudioModel:"audioflash",flashStreamType:"file",flashRTMPServer:"",flashVars:null,width:0,height:0},cfg||{});this._dynamicConfOpts=["ID","title","cover","controls","start","stop","volume","poster","disablePause","disallowSkip","fixedVolume","imageScaling","videoScaling","flashVars","flashAudioModel","flashVideoModel","playerFlashMP4","playerFlashMP3","flashStreamType","flashRTMPServer"];this._persistentConfOpts=["volume","enableNativePlayback","enableFlashFallback"];this._queue=[];this.env={playerStyle:null,scrollTop:null,scrollLeft:null,bodyOverflow:null,playerDom:{},mediaDom:{},media_canvasDom:{},media_clickcatcherDom:{},canvasDom:{},agent:"standard",clientConfig:{supportsOverlays:true,modelExtensions:{}},mouseIsOver:false,loading:false};this.mediaTypes={0:{ext:"NaN",type:"none/none",model:"NA",platform:"native"},1:{ext:"json",type:"text/json",model:"playlist",platform:"internal"},2:{ext:"xml",type:"text/xml",model:"playlist",platform:"internal"},3:{ext:"ogv",type:"video/ogg",model:"video",platform:"native"},4:{ext:"m4v",type:"video/mp4",model:"video",platform:"flash"},5:{ext:"webm",type:"video/webm",model:"video",platform:"native"},6:{ext:"ogg",type:"video/ogg",model:"video",platform:"native"},7:{ext:"anx",type:"video/ogg",model:"video",platform:"native"},8:{ext:"jpg",type:"image/jpeg",model:"image",platform:"native"},9:{ext:"gif",type:"image/gif",model:"image",platform:"native"},10:{ext:"png",type:"image/png",model:"image",platform:"native"},11:{ext:"flv",type:"video/x-flv",model:"videoflash",platform:"flash",fixed:true},12:{ext:"flv",type:"video/flv",model:"videoflash",platform:"flash",fixed:true},13:{ext:"mp4",type:"video/mp4",model:"videoflash",platform:"flash"},14:{ext:"mov",type:"video/quicktime",model:"videoflash",platform:"flash"},15:{ext:"youtube.com",type:"video/youtube",model:"youtube",platform:"flash",fixed:"maybe"},16:{ext:"ogg",type:"audio/ogg",model:"audio",platform:"native"},17:{ext:"oga",type:"audio/ogg",model:"audio",platform:"native"},18:{ext:"mp3",type:"audio/mp3",model:"audioflash",platform:"flash"},19:{ext:"html",type:"text/html",model:"html",platform:"internal"}};this.clientConfig={0:{regex:"iPhone",agent:"iphone",supportsCookies:false,supportsOverlays:false,modelExtensions:{video:"mobile_apple",youtube:"mobile_apple"}},1:{regex:"iPad",agent:"ipad",supportsCookies:false,supportsOverlays:false,modelExtensions:{video:"mobile_apple",youtube:"mobile_apple"}},2:{regex:"iPod",agent:"ipod",supportsCookies:false,supportsOverlays:false,modelExtensions:{video:"mobile_apple",youtube:"mobile_apple"}}};this.media=[null];this.plugins=[];this.listeners=[];this.mediaGrid={};this.playerModel={};this._isReady=false;this._displayClicks=0;this._isInFullscreen=false;this._currentItem=0;this._playlistServer="";this._id="";this._FFreinit=false;this._initialConfig={};this.getFromUrl=function(url,ref,callback,customParser){var dataType=null,data=null;_xmlParser=function(xdoc){try{if(!xdoc){return null}var tmpObj={};tmpObj.typeOf="JSXBObject";var xroot=(xdoc.nodeType==9)?xdoc.documentElement:xdoc;tmpObj.RootName=xroot.nodeName||"";if(xdoc.nodeType==3||xdoc.nodeType==4){return xdoc.nodeValue}var isNumeric=function(s){var testStr="";if(s&&typeof s=="string"){testStr=s}var pattern=/^((-)?([0-9]*)((\.{0,1})([0-9]+))?$)/;return pattern.test(testStr)};function formatName(name){var regEx=/-/g;var tName=String(name).replace(regEx,"_");return tName}function setAttributes(obj,node){if(node.attributes.length>0){var a=node.attributes.length-1;var attName;obj._attributes=[];do{attName=String(formatName(node.attributes[a].name));obj._attributes.push(attName);obj[attName]=$.trim(node.attributes[a].value)}while(a--)}}function setHelpers(grpObj){grpObj.getNodeByAttribute=function(attr,obj){if(this.length>0){var cNode;var maxLen=this.length-1;try{do{cNode=this[maxLen];if(cNode[attr]==obj){return cNode}}while(maxLen--)}catch(e){return false}return false}};grpObj.contains=function(attr,obj){if(this.length>0){var maxLen=this.length-1;try{do{if(this[maxLen][attr]==obj){return true}}while(maxLen--)}catch(e){return false}return false}};grpObj.indexOf=function(attr,obj){var pos=-1;if(this.length>0){var maxLen=this.length-1;try{do{if(this[maxLen][attr]==obj){pos=maxLen}}while(maxLen--)}catch(e){return -1}return pos}}}function setObjects(obj,node){var elemName;var cnode;var tObj;var cName="";if(!node){return null}if(node.attributes.length>0){setAttributes(obj,node)}obj.Text="";if(node.hasChildNodes()){var nodeCount=node.childNodes.length-1;var n=0;do{cnode=node.childNodes[n];switch(cnode.nodeType){case 1:obj._children=[];elemName=(cnode.localName)?cnode.localName:cnode.baseName;elemName=formatName(elemName);if(cName!=elemName){obj._children.push(elemName)}if(!obj[elemName]){obj[elemName]=[]}tObj={};obj[elemName].push(tObj);if(cnode.attributes.length>0){setAttributes(tObj,cnode)}if(!obj[elemName].contains){setHelpers(obj[elemName])}cName=elemName;if(cnode.hasChildNodes()){setObjects(tObj,cnode)}break;case 3:obj.Text+=$.trim(cnode.nodeValue);break;case 4:obj.Text+=(cnode.text)?$.trim(cnode.text):$.trim(cnode.nodeValue);break}}while(n++<nodeCount)}}setObjects(tmpObj,xroot);xdoc=null;xroot=null;return tmpObj}catch(e){return null}};if(ref==this){this._bubbleEvent("scheduleLoading",1+this.getItemCount())}$.ajax({url:url,complete:function(xhr,status){dataType=(xhr.getResponseHeader("Content-Type").indexOf("xml")>-1)?"xml":null;dataType=(xhr.getResponseHeader("Content-Type").indexOf("json")>-1&&dataType===null)?"json":dataType;switch(dataType){case"xml":if(window.DOMParser){parser=new DOMParser();data=parser.parseFromString(xhr.responseText,"text/xml")}else{data=new ActiveXObject("Microsoft.XMLDOM");data.async="false";data.loadXML(xhr.responseText)}data=_xmlParser(data);break;case"json":data=xhr.responseText;if(typeof data=="string"){data=$.parseJSON(data)}break;default:data=xhr.responseText;break}try{data=customParser(data)}catch(e){}ref[callback](data)},error:function(data){ref[callback](false)}});return this};this._reelUpdate=function(obj){if(typeof obj!="object"){obj=[{file:"none",type:"NA",errorCode:98}]}else{try{if(obj.length==0){obj=[{file:"none",type:"NA",errorCode:97}]}}catch(e){}}var ref=this;var data=obj;this.media=[];try{var changes=false;for(var props in data.config){if(typeof data.config[props].indexOf("objectfunction")>-1){continue}this.config[props]=this._cleanValue(data.config[props]);changes=true}delete (data.config);if(changes===true){this._debug("Updated config var: "+props+" to "+this.config[props]);this._bubbleEvent("configModified")}}catch(e){}var files=data.playlist||data;for(var item in files){if(typeof files[item]=="function"){continue}if(files[item]){this._addItem(this._prepareMedia({file:files[item],config:files[item].config||{},errorCode:files[0].errorCode}))}}this.env.loading=false;this._bubbleEvent("scheduled",1+this.getItemCount());this._syncWithPlugins(function(){ref.setActiveItem(0)})};this._addItem=function(data,idx,replace){var resultIdx=0;if(this.media.length===1&&this.media[0].mediaModel=="NA"){this._detachplayerModel();this.media=[]}if(idx===undefined||idx<0||idx>this.media.length-1){this.media.push(data);resultIdx=this.media.length-1}else{this.media.splice(idx,(replace===true)?1:0,data);resultIdx=idx}this._bubbleEvent("scheduleModified",this.getItemCount());return resultIdx};this._removeItem=function(idx){var resultIdx=0;if(this.media.length===1){if(this.media[0].mediaModel=="NA"){return 0}else{this.media[0]=this._prepareMedia({file:""});return 0}}if(idx===undefined||idx<0||idx>this.media.length-1){this.media.pop();resultIdx=this.media.length}else{this.media.splice(idx,1);resultIdx=idx}this._bubbleEvent("scheduleModified",this.getItemCount());return resultIdx};this._prepareMedia=function(data){var mediaFile="",mediaType="",mediaModel="NA",fileExt="",extTypes={},typesModels={},errorCode=data.errorCode||7,lastLevel=100;var extRegEx=[];for(var i in this.mediaTypes){extRegEx.push("."+this.mediaTypes[i].ext);extTypes[this.mediaTypes[i].ext]=this.mediaTypes[i];typesModels[this.mediaTypes[i].type]=this.mediaTypes[i]}extRegEx="^.*.("+extRegEx.join("|")+")$";if(typeof data.file=="string"){data.file=[{src:data.file}];if(typeof data.type=="string"){data.file=[{src:data.file,type:data.type}]}}if(data.file===false){data.file=[{src:""}]}try{var dynConf=this.config.dynamicTypeExtensions;var tagsUsed,tag,filename;if(dynConf){filename=data.file[0].src+"";if(data.file.length==1){for(var j in dynConf){if(filename.match("{*}")){if(!data.file[j]){data.file[j]={}}data.file[j].src=filename.replace("{*}",dynConf[j].ext);for(var k in dynConf[j]){if(k=="ext"){continue}data.file[j][k]=dynConf[j][k]}}}}}for(var i in data.file){tagsUsed=data.file[0][i].src.match(/\{[a-z\*]*\}/gi);tag="";if(tagsUsed){for(var i=0;i<tagsUsed.length;i++){tag=tagsUsed[i].replace("{","").replace("}","");if(this.getItemConfig(tag)!==false){data.file[0][i].src=data.file[0][i].src.replace("{"+tag+"}",this.getItemConfig(tag))}else{data.file[0][i].src=data.file[0][i].src.replace("{"+tag+"}","")}}}}}catch(e){}var sourceObj={};for(var index in data.file){sourceObj=data.file[index];if(typeof sourceObj=="string"){sourceObj={src:sourceObj}}if(sourceObj.src==undefined){continue}try{fileExt=sourceObj.src.match(new RegExp(extRegEx))[1];fileExt=(!fileExt)?"NaN":fileExt.replace(".","")}catch(e){fileExt="NaN"}if(sourceObj.type===undefined||sourceObj.type===""){if(extTypes[fileExt]){$.extend(sourceObj,extTypes[fileExt])}}else{try{var codecMatch=sourceObj.type.split(" ").join("").split(/[\;]codecs=.([a-zA-Z0-9\,]*)[\'|\"]/i);if(codecMatch[1]!==undefined){sourceObj.codec=codecMatch[1];sourceObj.type=codecMatch[0]}}catch(e){}if(typesModels[sourceObj.type]){$.extend(sourceObj,typesModels[sourceObj.type])}}if(lastLevel===100){mediaFile=sourceObj.src}if(lastLevel>this.config.platformPriority.indexOf(sourceObj.platform)&&this.mediaGrid[sourceObj.type]!="NA"){lastLevel=this.config.platformPriority.indexOf(sourceObj.platform);try{mediaModel=this.mediaGrid[sourceObj.type].toUpperCase()}catch(e){mediaModel="NA"}mediaFile=sourceObj.src;mediaType=sourceObj.type}if(index==="src"){break}}if(typeof eval("playerModel"+mediaModel)!=="function"){mediaModel="NA";errorCode=0}else{try{if(this.env.clientConfig.modelExtensions[this.mediaGrid[mediaType]]!=undefined){mediaModel+="_"+(this.env.clientConfig.modelExtensions[this.mediaGrid[mediaType]].toUpperCase())}}catch(e){}}var block=0;if(this.config.allowPlaybackFrom.length>0){for(var i=0;i<this.config.allowPlaybackFrom.length;i++){if(mediaFile.indexOf(this.config.allowPlaybackFrom[i])>-1){block++}}if(block==0){mediaFile=""}}data.file=mediaFile;data.mediaType=mediaType;data.mediaModel=mediaModel;data.errorCode=errorCode;data.ID=this.randomId(8);data._VALIDATED=true;data.config=data.config||{};this._debug("Set item of type: "+mediaType+" Model: "+data.mediaModel+" File:"+data.file+" Priority: "+lastLevel);return data};this._modelUpdateListener=function(type,value){var ref=this;if(!this.playerModel.init){return}if(type!="time"&&type!="progress"){this._debug("Received model Update: '"+type+"' ("+value+") while handling '"+this.playerModel.getFile()+"' using '"+this.playerModel.getModelName()+"'")}switch(type){case"state":this._bubbleEvent("state",value);switch(value){case"IDLE":break;case"AWAKENING":break;case"BUFFERING":break;case"ERROR":break;case"PLAYING":break;case"STOPPED":this._bubbleEvent("stopped",{});break;case"PAUSED":if(this.getItemConfig("disablePause")===true){this.playerModel.applyCommand("play",0)}break;case"COMPLETED":if(this._currentItem+1>=this.media.length){this._bubbleEvent("done",{})}this.setActiveItem("next");break}break;case"buffer":this._bubbleEvent("buffer",value);this._bubbleEvent("time",value);break;case"displayReady":this._bubbleEvent("displayReady",true);if(this.env.media_canvasDom!=null){this.env.media_clickcatcherDom.show();this.env.media_canvasDom.show()}var ref=this;var psc=function(){if(ref.env.media_canvasDom!=null&&!ref.playerModel.getHasGUI()){ref._addGUIListeners()}else{if(ref.playerModel.getHasGUI()){ref._removeGUIListeners();ref.env.media_clickcatcherDom.hide();ref.env.media_canvasDom.hide()}}};this._syncWithPlugins(psc);break;case"FFreinit":break;case"seek":this._bubbleEvent("seek",{dest:value});break;case"volume":this.setItemConfig({volume:this.playerModel.getVolume()});this._bubbleEvent("volume",this.playerModel.getVolume());break;case"progress":this._bubbleEvent("progress",value);break;case"time":this._bubbleEvent("time",value);break;case"fullscreen":this._bubbleEvent("fullscreen",value);break;case"resize":this.playerModel.applyCommand("resize");this._bubbleEvent("resize",value);break;case"playlist":this.setFile(value,true);break;case"config":this.setItemConfig(value);break}};this._syncWithPlugins=function(callback){var ref=this;this.env.loading=true;if(this.plugins.length==0){this._debug("Plugins Ready!");this._bubbleEvent("pluginsReady",{});this.env.loading=false;callback();return}(function(){try{for(var i=0;i<ref.plugins.length;i++){if(ref.plugins[i].pluginReady!==true){setTimeout(arguments.callee,80);return}}ref._debug("Plugins Ready!");ref.env.loading=false;ref._bubbleEvent("pluginsReady",{});callback()}catch(e){}})()};this._addGUIListeners=function(){var ref=this;this.env.mediaDom.unbind();this.env.mediaDom.click(function(event){ref._displayClickListener(event)});this.env.mediaDom.mousemove(function(event){ref._displayMousemoveListener(event)});this.env.media_clickcatcherDom.unbind();this.env.media_clickcatcherDom.click(function(event){ref._displayClickListener(event)});this.env.media_clickcatcherDom.mousemove(function(event){ref._displayMousemoveListener(event)});this.env.media_clickcatcherDom.mouseenter(function(event){ref._displayMouseEnterListener(event)});this.env.media_clickcatcherDom.mouseleave(function(event){ref._displayMouseLeaveListener(event)});var keyPressHandler=function(evt){ref._keyListener(evt)};if(this.config.enableKeyboard===true){$(document.documentElement).unbind("keydown",keyPressHandler);$(document.documentElement).unbind("keypress",keyPressHandler);if(!$.browser.mozilla){$(document.documentElement).keydown(keyPressHandler)}else{$(document.documentElement).keypress(keyPressHandler)}}};this._removeGUIListeners=function(){$("#"+this.getId()).unbind();this.env.mediaDom.unbind();this.env.media_clickcatcherDom.unbind()};this._registerPlugins=function(){if(this.config.plugins.length>0&&this.plugins.length==0){for(var i=0;i<this.config.plugins.length;i++){var pluginName="projekktor"+this.config.plugins[i];var pluginObj=$.extend(new projekktorPluginInterface(),eval(pluginName).prototype);pluginObj.name=this.config.plugins[i].toLowerCase();pluginObj.player=this;pluginObj.playerDom=this.env.media_canvasDom;pluginObj.canvas.media=this.env.media_canvasDom;pluginObj.canvas.projekktor=this.env.canvasDom;pluginObj._init(this.config["plugin_"+this.config.plugins[i].toLowerCase()]||{});this.plugins.push(pluginObj)}}};this._unbindPlugins=function(rmvPl){if(this.plugins.length==0){return}var pluginsToRemove=rmvPl||[];for(var j=0;j<this.plugins.length;j++){if($.inArray(j,pluginsToRemove)||pluginsToRemove.length===0){$(this.plugins[j]).unbind()}}};this._bubbleEvent=function(evt,value){var event=evt,pluginData={};if(typeof event=="object"){if(!event._plugin){return}value.PLUGIN=event._plugin+"";value.EVENT=event._event+"";event="pluginevent"}if(event!="time"&&event!="progress"&&event!="mousemove"){this._debug("Fireing :"+event)}if(this.plugins.length>0){for(var i in this.plugins){try{this.plugins[i][event+"Handler"](value,this)}catch(e){}}}if(this.listeners.length>0){for(var i in this.listeners){try{if(this.listeners[i]["event"]==event||this.listeners[i]["event"]=="*"){this.listeners[i]["callback"](value,this)}}catch(e){}}}};this._detachplayerModel=function(){this._isReady=false;this._displayClicks=0;try{$(this).unbind();this._unbindPlugins();this._removeGUIListeners();this.playerModel.destroy()}catch(e){this.playerModel=new playerModel();this.playerModel.init({controller:this,autoplay:false})}this._bubbleEvent("detach",{})};this._displayClickListener=function(evt){var ref=this;if(this.getState()=="ERROR"){this.setActiveItem("next");return false}this._displayClicks++;if(this._displayClicks>0){setTimeout(function(){if(ref._displayClicks==1){ref._displaySingleClick()}else{if(ref._displayClicks==2){ref._displayDblClick()}}ref._displayClicks=0;if($.browser.msie){evt.cancelBubble=true}else{evt.stopPropagation()}},250)}return false};this._displaySingleClick=function(){this.setPlayPause()};this._displayDblClick=function(){var ref=this;this.setFullscreen(!this.env.inFullscreen)};this._displayMousemoveListener=function(evt){this._bubbleEvent("mousemove",{});if($.browser.msie){evt.cancelBubble=true}else{evt.stopPropagation()}};this._displayMouseEnterListener=function(evt){this._bubbleEvent("mouseenter",{});this.env.mouseIsOver=true;if($.browser.msie){evt.cancelBubble=true}else{evt.stopPropagation()}};this._displayMouseLeaveListener=function(evt){this._bubbleEvent("mouseleave",{});this.env.mouseIsOver=false;if($.browser.msie){evt.cancelBubble=true}else{evt.stopPropagation()}};this._keyListener=function(evt){if(this.env.mouseIsOver!==true){return}this._debug("Keypress: "+evt.keyCode);this._bubbleEvent("key",evt.keyCode);switch(evt.keyCode){case 27:this.setFullscreen(false);break;case 13:this.setFullscreen(true);break;case 39:break;case 37:break;case 0:this.setPlayPause();break}};this._setMediaContainer=function(width,height,x,y){var widthRatio=width/this.config.width;var heightRatio=height/this.config.height;var css={width:"100%",height:"100%",top:0,left:0};try{this.env.mediaDom.css(css);this.env.media_canvasDom.css(css);this.env.media_clickcatcherDom.css(css)}catch(e){}};this._enterFullViewport=function(){if(this.env.inFullscreen===true){return}this.env.scrollTop=$(window).scrollTop();this.env.scrollLeft=$(window).scrollLeft();this.env.playerStyle=this.env.playerDom.attr("style");this.env.bodyOverflow=$("body").css("overflow");$(window).scrollTop(0);$(window).scrollLeft(0);$("body").css("overflow","hidden");this.env.playerDom.css({position:"fixed",display:"block",top:0,left:0,width:"100%",height:"100%",zIndex:99997});this.env.inFullscreen=true};this._exitFullViewport=function(){if(this.env.inFullscreen===false){return}this.env.playerDom.attr("style",this.env.playerStyle);$("body").css("overflow",this.env.bodyOverflow);$(window).scrollTop(this.env.scrollTop);$(window).scrollLeft(this.env.scrollLef);this.env.inFullscreen=false};this._enterSandboxFullViewport=function(){if(this.env.inFullscreen===true){return}var win=this.getSandboxWindow();var iframe=this.getSandboxIframe();if(!win||!iframe){return}this.env.scrollTop=win.scrollTop();this.env.scrollLeft=win.scrollLeft();this.env.playerStyle=iframe.attr("style");this.env.sandBoxWidth=iframe.attr("width");this.env.sandBoxHeight=iframe.attr("height");this.env.bodyOverflow=$(win[0].document.body).css("overflow");win.scrollTop(0);win.scrollLeft(0);$(win[0].document.body).css("overflow","hidden");iframe.css({position:"fixed",display:"block",top:0,left:0,width:"100%",height:"100%",zIndex:9999});this.env.inFullscreen=true};this._exitSandboxFullViewport=function(){if(this.env.inFullscreen===false){return}var win=this.getSandboxWindow();var iframe=this.getSandboxIframe();if(!win||!iframe){return}win.scrollTop(this.env.scrollTop);win.scrollLeft(this.env.scrollLef);$(win[0].document.body).css("overflow",this.env.bodyOverflow);iframe.attr("width",this.env.sandBoxWidth+"px");iframe.attr("height",this.env.sandBoxHeight+"px");iframe.attr("style",(this.env.playerStyle==undefined)?"":this.env.playerStyle);this.env.inFullscreen=false};this.getItemConfig=function(name,itemIdx){var idx=itemIdx||this._currentItem;var result=false;if(this.config[name]!==undefined){result=this.config[name];if($.inArray(name,this._persistentConfOpts)>-1){if(this._cookie(name)!==null){result=this._cookie(name)}}if($.inArray(name,this._dynamicConfOpts)>-1||name.indexOf("plugin_")>-1){try{if(this.media[idx]["config"][name]!==undefined&&this.media[idx]["config"][name]!==false){result=this.media[idx]["config"][name]}}catch(e){}}}else{try{if(this.media[idx]["config"][name]){result=this.media[idx]["config"][name]}}catch(e){}}return result};this.getItemCount=function(){return this.media.length};this.getState=function(){try{return this.playerModel.getState()}catch(e){return"IDLE"}};this.getIsAutoslide=function(){return this.playerModel.getIsAutoslide()};this.getLoadProgress=function(){try{return this.playerModel.getLoadProgress()}catch(e){return 0}};this.getKbPerSec=function(){try{return this.playerModel.getKbPerSec()}catch(e){return 0}};this.getItemId=function(idx){if(this.config.poster===undefined){if(idx==undefined){return this.media[this._currentItem].ID}return this.media[idx].ID}else{if(idx==undefined){return this.media[this._currentItem+1].ID}return this.media[idx+1].ID}};this.getItemIdx=function(){return this._currentItem};this.getItem=function(){arg=arguments[0]||"current";switch(arg){case"next":return $.extend(true,[],this.media[this._currentItem+1]);case"prev":return $.extend(true,[],this.media[this._currentItem-1]);case"current":return $.extend(true,[],this.media[this._currentItem]);case"*":return $.extend(true,[],this.media);default:return $.extend(true,[],this.media[arg])}};this.getVolume=function(){return(this.getItemConfig("fixedVolume")===true)?this.config.volume:this.getItemConfig("volume")};this.getTrackId=function(){if(this.getItemConfig("trackId")){return this.config.trackId}if(this._playlistServer!=null){return"pl"+this._currentItem}return null};this.getLoadPlaybackProgress=function(){try{return this.playerModel.getLoadPlaybackProgress()}catch(e){return 0}};this.getDuration=function(){try{return this.playerModel.getDuration()}catch(e){return 0}};this.getPosition=function(){try{return this.playerModel.getPosition()||0}catch(e){return 0}};this.getTimeLeft=function(){try{return this.playerModel.getDuration()-this.playerModel.getPosition()}catch(e){return this.media[this._currentItem].duration}};this.getInFullscreen=function(){return this.env.inFullscreen};this.getMediaContainer=function(){return $("#"+this.getMediaContainerId())};this.getMediaContainerId=function(){return this.getId()+"_media"};this.getMediaType=function(){return this.media[this._currentItem].mediaType};this.getUsesFlash=function(){return(this.playerModel.requiresFlash!==false)};this.getModel=function(){return this.media[this._currentItem].mediaModel};this.getSandboxWindow=function(){try{return $(parent.window)}catch(e){return false}};this.getSandboxIframe=function(){try{return window.$(frameElement)}catch(e){return false}};this.getPlaylist=function(){return this.getItem("*")};this.getFlashVersion=function(){try{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{axo.AllowScriptAccess="always"}catch(e){return"6,0,0"}}catch(e){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].match(/\d+/g)[0]}}catch(e){}}return"0,0,0".match(/\d+/g)[0]};this.getCanPlayNatively=function(type){var checkFor=[];compTable=this._testMediaSupport(true);if(typeof type=="string"){checkFor.push(type)}if(typeof type=="array"){checkFor=type}for(var i in this.mediaGrid){if(compTable[i]=="video"||compTable[i]=="audio"){if(arguments.length===0){return true}else{if($.inArray(i,checkFor)>-1){return true}}}}return false};this.getId=function(){return this._id};this.getCssClass=function(){return this.config.cssClassPrefix};this.setActiveItem=function(mixedData){var newItem=0;var lastItem=this._currentItem;if(this.env.loading===true){return this}if(typeof mixedData=="string"){switch(mixedData){case"previous":if(this.getItemConfig("disallowSkip")==true&&this.getState()!=="COMPLETED"){return this}newItem=this._currentItem-1;break;case"next":if(this.getItemConfig("disallowSkip")==true&&this.getState()!=="COMPLETED"){return this}newItem=this._currentItem+1;break;default:case"poster":result=0;break}}else{if(typeof mixedData=="number"){newItem=parseInt(mixedData)}else{newItem=0}}if(newItem!=this._currentItem){if(this.getItemConfig("disallowSkip")==true&&this.getState()!=="COMPLETED"){return this}this._detachplayerModel()}var ap=false;if(newItem===0&&lastItem==0&&this.config.autoplay===true){ap=true}else{if(this.getItemCount()>1&&newItem!=lastItem&&this.config.continuous===true&&newItem<this.getItemCount()){ap=true}else{if(newItem>=this.getItemCount()||newItem<0){ap=this.config.loop;newItem=0}}}this._currentItem=newItem;var newModel=this.media[this._currentItem].mediaModel;if(newModel=="AUDIOFLASH"){newModel=this.getItemConfig("flashAudioModel")}else{if(newModel=="VIDEOFLASH"){newModel=this.getItemConfig("flashVideoModel")}}newModel=newModel.toUpperCase();try{if(typeof eval("playerModel"+newModel)!=="function"){newModel="NA";this.media[this._currentItem].mediaModel=newModel;this.media[this._currentItem].errorCode=8}}catch(e){newModel="NA";this.media[this._currentItem].mediaModel=newModel;this.media[this._currentItem].errorCode=8}this.playerModel=new playerModel();this.playerModel=$.extend(true,{},new playerModel(),eval("playerModel"+newModel).prototype);this.playerModel.init({media:$.extend(true,{},this.media[this._currentItem]),model:newModel,controller:this,environment:$.extend(true,{},this.env),autoplay:ap});this._setMediaContainer();this._bubbleEvent("item",this._currentItem);return this};this._enqueue=function(command,params){this._queue.push({command:command,params:params});this._processQueue()};this._clearqueue=function(command,params){this._queue=[]};this._processQueue=function(){var ref=this;if(this._processing===true){return}this._processing=true;(function(){if(ref.env.loading!==true&&ref.playerModel.getIsReady()){var msg=ref._queue.shift();if(!msg){ref._processing=false;return}if(typeof msg.command=="string"){ref.playerModel.applyCommand(msg.command,msg.params)}else{msg.command()}arguments.callee();return}setTimeout(arguments.callee,80)})()};this.getIsLastItem=function(){return((this._currentItem==this.media.length-1)&&this.config.loop!==true)};this.getIsFirstItem=function(){return((this._currentItem==0)&&this.config.loop!==true)};this.setPlay=function(){this._enqueue("play",false);return this};this.setPause=function(){this._enqueue("pause",false);return this};this.setStop=function(){this._enqueue("stop",false);return this};this.setPlayPause=function(){if(this.getState()!=="PLAYING"){this.setPlay()}else{this.setPause()}return this};this.setVolume=function(vol){if(this.getItemConfig("fixedVolume")==true){return this}if(typeof vol=="string"){var dir=vol.substr(0,1);vol=parseFloat(vol.substr(1));vol=(vol>1)?vol/100:vol;if(dir=="+"){vol=this.getVolume()+vol}else{if(dir=="-"){vol=this.getVolume()-vol}else{vol=this.getVolume()}}}if(typeof vol=="number"){this.setItemConfig({volume:vol});vol=(vol>1)?vol/100:vol;this._enqueue("volume",vol)}return this};this.setPlayhead=function(position){if(this.getItemConfig("disallowSkip")==true){return this}if(typeof position=="string"){var dir=position.substr(0,1);position=parseFloat(position.substr(1));if(dir=="+"){position=this.getPosition()+position}else{if(dir=="-"){position=this.getPosition()-position}else{position=this.getPosition()}}}if(typeof position=="number"){this._enqueue("seek",position)}return this};this.setPlayerPoster=function(url){var ref=this;this._enqueue(function(){ref.setItemConfig({poster:url},0)});return this};this.setItemConfig=function(){var ref=this;var args=arguments;this._enqueue(function(){ref._setItemConfig(args[0]||null,args[1]||null)});return this};this._setItemConfig=function(){if(!arguments.length){return result}var confObj=arguments[0];var dest="*";if(typeof confObj!="object"){return this}if(arguments[1]=="string"||arguments[1]=="number"){dest=arguments[1]}else{dest=this._currentItem}var value=false;for(var i in confObj){if($.inArray(i,this._persistentConfOpts)>-1){this._cookie(i,this._cleanValue(confObj[i]))}if($.inArray(i,this._dynamicConfOpts)===-1){continue}value=this._cleanValue(confObj[i]);if(dest=="*"){$.each(this.media,function(){if(this.config==undefined){this.config={}}this.config[i]=value});continue}if(this.media[dest]==undefined){return this}if(this.media[dest]["config"]==undefined){this.media[dest]["config"]={}}this.media[dest]["config"][i]=value}return this};this.setFullscreen=function(full){if(!this.config.enableFullscreen){return this}if(this.config.sandBox!==false){if(full==true){this._enterSandboxFullViewport()}else{this._exitSandboxFullViewport()}}else{if(full==true){this._enterFullViewport()}else{this._exitFullViewport()}}this.playerModel.applyCommand("fullscreen",full);return this};this.addListener=function(evt,callback){var ref=this;this._enqueue(function(){ref._addListener(evt,callback)})};this._addListener=function(evt,callback){var listenerObj={event:evt,callback:callback};this.listeners.push(listenerObj);return this};this.removeListener=function(evt,callback){var len=this.listeners.length;for(var i=0;i<len;i++){if(this.listeners[i].event!=evt&&evt!=="*"){continue}if(this.listeners[i].callback!=callback&&callback!==undefined){continue}this.listeners.splice(i,1)}return this};this.setItem=function(){var itemData=arguments[0];var affectedIdx=0;this._clearqueue();if(this.env.loading===true){return this}if(itemData==null){affectedIdx=this._removeItem(arguments[1]);if(affectedIdx===this._currentItem){this.setActiveItem("previous")}}else{affectedIdx=this._addItem(this._prepareMedia({file:itemData,config:itemData.config||{}}),arguments[1],arguments[2]);if(affectedIdx===this._currentItem){this.setActiveItem(this._currentItem)}}return this};this.setFile=function(arg,ext,dt){var data=arg||{};var externalData=ext||false;var result={};var dataType=dt||false;this._clearqueue();if(this.env.loading===true){return this}if(typeof data=="object"&&data.length==0){return false}this.env.loading=true;this._detachplayerModel();if(typeof data=="object"){if(data.length==0){this._reelUpdate({});return false}this._debug("Applying incoming JS Object",data);this._reelUpdate(data);return this}if(typeof data=="string"){var splt=[];splt[0]=data;if(data.indexOf(this.config.FilePosterSeparator)>-1){splt=data.split(this.config.FilePosterSeparator);data.config={poster:splt[1]}}else{result[0]={};result[0].file=data}if(externalData===false){this._debug("Applying incoming single file:"+result[0]["file"],data);this._reelUpdate(result)}else{this._debug("Loading external data from "+splt[0]);this._playlistServer=splt[0];this.getFromUrl(splt[0],this,"_reelUpdate",this.config.reelParser)}}return this};this.ping=function(){alert("pong");return this};this.selfDestruct=function(){var ref=this;this._enqueue(function(){ref._selfDestruct()});return this},this._selfDestruct=function(){var ref=this;$(this).unbind();this._unbindPlugins();this._removeGUIListeners();this.env.playerDom.replaceWith(this.env.srcNode);$.each(projekktors,function(idx){try{if(this.getId()==ref.getId()||this.getId()==ref.getId()||this.getParent()==ref.getId()){projekktors.splice(idx,1);return}}catch(e){}});return this};this.reset=function(){var ref=this;this._enqueue(function(){ref._reset()});return this},this._reset=function(){var ref=this;$(this).unbind();this._unbindPlugins();this._removeGUIListeners();this.mediaGrid=this._testMediaSupport();this._reelUpdate(this.config.playlist);return this},this._cookie=function(key,value){var options={};if(this.env.clientConfig.supportsCookies===false){return}if(arguments.length>1&&(value===null||typeof value!=="object")){if(value===null){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}return(document.cookie=[encodeURIComponent(this.config.cookieName+"_"+key),"=",options.raw?String(value):encodeURIComponent(String(value)),options.expires?"; expires="+this.config.cookieExpiry.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""))}options=value||{};var result,decode=options.raw?function(s){return s}:decodeURIComponent;var returnthis=(result=new RegExp("(?:^|; )"+encodeURIComponent(this.config.cookieName+"_"+key)+"=([^;]*)").exec(document.cookie))?decode(result[1]):null;return(returnthis!=null)?this._cleanValue(returnthis):null};this._testMediaSupport=function(foceTest){var result=[];var hasNativeAudio=false;var hasFlash=(this.getFlashVersion()>0);var nativeElementType="";for(i in this.mediaTypes){result[this.mediaTypes[i]["type"]]="NA";if(this.mediaTypes[i]["model"]=="image"&&this.mediaTypes[i]["platform"]=="native"){result[this.mediaTypes[i]["type"]]="image";continue}if(this.mediaTypes[i]["platform"]=="internal"){result[this.mediaTypes[i]["type"]]=this.mediaTypes[i]["model"];continue}if((hasFlash==true||this.mediaTypes[i]["fixed"]==="maybe")&&this.mediaTypes[i]["platform"]=="flash"){if(this.mediaTypes[i]["model"].indexOf("flash")>-1){if(this.getItemConfig("enableFlashFallback")==true||foceTest===true){result[this.mediaTypes[i]["type"]]=(this.mediaTypes[i]["type"].indexOf("audio")>-1)?"audioflash":"videoflash"}}else{result[this.mediaTypes[i]["type"]]=this.mediaTypes[i]["model"]}}if(this.mediaTypes[i]["fixed"]!==true&&(this.getItemConfig("enableNativePlayback")!==false||foceTest===true)){if((this.mediaTypes[i]["type"].indexOf("video")>-1||this.mediaTypes[i]["type"].indexOf("audio")>-1)){try{nativeElementType=(this.mediaTypes[i]["type"].indexOf("video")>-1)?"video":"audio";var testObject=document.createElement(nativeElementType);if(testObject.canPlayType!=false){switch(testObject.canPlayType(this.mediaTypes[i]["type"])){case"no":break;case"":break;case"maybe":if($.browser.opera){break}case"probably":default:result[this.mediaTypes[i]["type"]]=nativeElementType}}}catch(e){}}}}this._debug("Client media support matrix:",result);return result};this.randomId=function(length){var chars="abcdefghiklmnopqrstuvwxyz";var result="";for(var i=0;i<length;i++){var rnum=Math.floor(Math.random()*chars.length);result+=chars.substring(rnum,rnum+1)}return result};this._cleanValue=function(value){switch(value){case"false":return false;case"true":return true;case"null":return null;case"undefined":return"";case undefined:return false;default:return(typeof value!="string"&&typeof value!="number"&&typeof value!="boolean")?false:value}};this._getFilesFromHash=function(idx){var data=window.location.hash.substring(1);if(data==undefined||data==null){return false}if(data.indexOf(this.config.FilePosterSeparator)>-1){data=data.split(this.config.FilePosterSeparator)}if(data[1]&&idx==1){return data[1]}else{if(idx==0){return data[0]}}return false};this._getTypeFromFileExtension=function(url){var fileExt="",extRegEx=[],extTypes={},extRegEx=[];for(var i in this.mediaTypes){extRegEx.push("."+this.mediaTypes[i].ext);extTypes[this.mediaTypes[i].ext]=this.mediaTypes[i]}extRegEx="^.*.("+extRegEx.join("|")+")$";try{fileExt=url.match(new RegExp(extRegEx))[1];fileExt=(!fileExt)?"NaN":fileExt.replace(".","")}catch(e){fileExt="NaN"}return extTypes[fileExt].type};this._debug=function(desc,data){if(this.config.debug===false){return}if(this.config.debug=="console"){try{if(desc){console.log(desc)}if(data&&this.config.debugLevel>1){console.log(data)}}catch(e){}return}var result="<pre><b>"+desc+"</b>\n";if(data&&this.config.debugLevel>1){switch(typeof data){case"undefined":break;case"object":var temp="";if(temp==""){temp="";for(var i in data){temp+=i+" : "+data[i]+"\n"}}result+=temp;break;case"string":result+=data}result+="</pre>"}try{$("#"+this.config._debug).prepend(result)}catch(e){}};this._init=function(srcNode){var ref=this,files=[];this._id=srcNode[0].id||this.randomId(8);this.env.srcNode=$.extend(true,{},srcNode);if(this.config.width==0){this.config.width=(srcNode.attr("width"))?srcNode.attr("width"):srcNode.width()}if(this.config.height==0){this.config.height=(srcNode.attr("height"))?srcNode.attr("height"):srcNode.height()}this.config.autoplay=(this.config.autoplay||(srcNode.attr("autoplay")!==undefined&&srcNode.attr("autoplay")!==false));this.config.controls=((srcNode.attr("controls")!==undefined&&srcNode.attr("controls")!==false)||this.config.controls===true);this.config.loop=(srcNode.attr("loop")!==undefined&&srcNode.attr("loop")!==false)?true:this.config.loop;this.config.title=(srcNode.attr("title")!==""&&srcNode.attr("title")!==undefined&&srcNode.attr("title")!==false)?srcNode.attr("title"):false;this.config.poster=($(srcNode).attr("poster")!==""&&srcNode.attr("poster")!==undefined&&srcNode.attr("poster")!==false)?$(srcNode).attr("poster"):this.config.poster;$(window).resize(function(){ref._modelUpdateListener("resize")});if($.browser.msie){var htmlTag=srcNode.html().toLowerCase();var attr=["autoplay","controls","loop"];for(var i=0;i<attr.length;i++){if(htmlTag.indexOf(attr[i])==-1){continue}this.config[attr[i]]=true}}files[0]=[];if(this.config.sandBox!==false){files[0].push({src:this._getFilesFromHash(0),type:$(this).attr("type")||this._getTypeFromFileExtension(this._getFilesFromHash(0))});this.config.poster=this._getFilesFromHash(1)}else{if(srcNode[0].tagName.toUpperCase()=="VIDEO"||srcNode[0].tagName.toUpperCase()=="AUDIO"){if(srcNode.attr("src")){files[0].push({src:srcNode.attr("src"),type:srcNode.attr("type")||this._getTypeFromFileExtension(srcNode.attr("src"))})}if($.browser.msie){var childNode=srcNode;do{childNode=childNode.next("source");if(childNode.attr("src")){files[0].push({src:childNode.attr("src"),type:childNode.attr("type")||this._getTypeFromFileExtension(childNode.attr("src"))})}}while(childNode.attr("src"))}else{srcNode.children("source").each(function(){if($(this).attr("src")){files[0].push({src:$(this).attr("src"),type:$(this).attr("type")||ref._getTypeFromFileExtension($(this).attr("src"))})}})}}else{if(this.config.playlist){files=this.config.playlist}}}if(this.config.designMode===true){this.config.poster=this.config.desginGrid}for(var i in this.clientConfig){if(navigator.userAgent.match(new RegExp(this.clientConfig[i].regex))){this.env.clientConfig=this.clientConfig[i];this._debug("Using alternate config for "+this.env.clientConfig.agent);break}}this.env.playerDom=$(document.createElement("div")).attr({id:srcNode[0].id,"class":srcNode[0].className,style:srcNode.attr("style")}).css("overflow","hidden").css("width",this.config.width+"px").css("height",this.config.height+"px");srcNode.replaceWith(this.env.playerDom);var css={position:"absolute",overflow:"hidden",top:0,left:0,height:"100%",width:"100%",display:"block",padding:0,margin:0};this.env.mediaDom=$(document.createElement("div")).appendTo(this.env.playerDom).attr({id:this.getId()+"_media"}).css(css).css("z-index",2);this.env.media_canvasDom=(this.env.clientConfig.supportsOverlays!==true)?null:$(document.createElement("div")).appendTo(this.env.playerDom).attr({id:this.getId()+"_media_canvas"}).css(css).css("z-index",10);this.env.media_clickcatcherDom=(this.env.clientConfig.supportsOverlays!==true)?null:$(document.createElement("div")).appendTo(this.env.media_canvasDom).attr({id:this.getId()+"_media_clickcatcher"}).css(css);if(this.env.clientConfig.supportsOverlays!==true){this._debug("Client does not support dynamic overlays.")}this.mediaGrid=this._testMediaSupport();try{$("#projekktorver").html("V"+this.config.version)}catch(e){}this._registerPlugins();if(this.config.forceFullViewport==true&&this.config.sandBox!==true){this.config.enableFullscreen=false;this._enterFullViewport()}if(this.config.sandBox!==false){if(this.getSandboxWindow()){this.getSandboxWindow().ready(function(){ref._enterFullViewport();ref.env.inFullscreen=false})}else{ref._enterFullViewport();ref.env.inFullscreen=false;this.config.disableFullscreen=true}}for(var i in files[0]){if(files[0][i].type=="text/json"||files[0][i].type=="text/xml"){var dataType=null;try{dataType=files[0][i].type.split("/")[1]}catch(e){}this.setFile(files[0][i].src,true,dataType);return this}}this._reelUpdate((files.length>0)?files:this.config.playlist);return this};return this._init(srcNode)}}});var projekktorPluginInterface=function(){};jQuery(function(a){projekktorPluginInterface.prototype={pluginReady:false,name:"",player:{},config:{},playerDom:null,canvas:{media:null,projekktor:null},_init:function(b){this.config=a.extend(true,this.config,b);this.initialize()},getItemConfig:function(b){var c=this.player.getItemConfig("plugin_"+this.name);if(c===false||c[b]===false){return(this.config[b]||false)}return(c[b]||false)},getPlayerConfig:function(b){return(this.player.config[b]||this.config[b]||false)},sendEvent:function(b,c){this.player._bubbleEvent({_plugin:this.name,_event:b},c)},parseTemplate:function(b,d){var c;for(c in d){b=b.replace(new RegExp("{"+c+"}","gi"),d[c])}b=b.replace(/{(.*?)}/gi,"");return b},initialize:function(){},detachHandler:function(b){},displayReadyHandler:function(b){},pluginsReadyHandler:function(b){},stateHandler:function(){},bufferHandler:function(){},scheduleLoading:function(b){},configModified:function(b){},scheduledHandler:function(b){},scheduleModifiedHandler:function(b){},itemHandler:function(b){},displayReadyHandler:function(b){},startHandler:function(b){},doneHandler:function(b){},stopHandler:function(b){},endedHandler:function(b){},canplayHandler:function(b){},volumeHandler:function(b){},timeHandler:function(b){},progressHandler:function(b){},mousemoveHandler:function(b){},mouseleaveHandler:function(b){},mouseeterHandler:function(b){},fullscreenHandler:function(b){},awakingHandler:function(b){},keyHandler:function(b){}}});
/*
 * Projekktor II Plugin: Controlbar
 * VERSION: 1.0
 * DESC: Adds a fully features controlbar element to the video display
 * Copyright 2010, Sascha Kluger, Spinning Airwhale Media, http://www.spinningairwhale.com
 *
 * under GNU General Public License
 * http://www.projekktor.com/license/
 */
var projekktorControlbar=function(){};jQuery(function(a){projekktorControlbar.prototype={_controlHideTimer:null,_noControlHide:false,_controlsFading:false,_volumeSliderActive:false,_preMuteVolume:0,_timeTags:{},_container:null,_popsition:{left:0,right:0},config:{controlsDisableFade:false,controlsTemplate:"<div {fsexit}></div><div {fsenter}></div><div {play}></div><div {pause}></div><div {prev}></div><div {next}></div><div {title}></div><div {timeleft}><span {timedur}>{min_dur}:{sec_dur}</span><span {timeremaining}> | {min_rem}:{sec_rem}</span></div><div {scrubber}><div {loaded}></div><div {playhead}></div></div><div {vslider}><div {vmarker}></div><div {vknob}></div></div><div {mute}></div><div {vmax}></div>",controlsTemplateFull:null,toggleMute:false,playheadDomId:"playhead",loadedDomId:"loaded",scrubberDomId:"scrubber",playDomId:"play",pauseDomId:"pause",prevDomId:"prev",nextDomId:"next",fsexitDomId:"fsexit",fsenterDomId:"fsenter",vsliderDomId:"vslider",vmarkerDomId:"vmarker",vknobDomId:"vknob",muteDomId:"mute",vmaxDomId:"vmax",startDomId:"start",controlsDomId:"controls",titleDomId:"title",draghandleDomId:"draghandle"},initialize:function(){this._container=a(document.createElement("div")).appendTo(this.playerDom);this.drawControls();this.addGuiListeners();if(this.getPlayerConfig("designMode")===true){try{this.drawTitle("Phnglui mglwnafh Cthulhu Rlyeh wgahnagl fhtagn.");this.drawUpdateTimeDisplay();a("#"+this.player.getId()+"_"+this.config.playheadDomId).css("width","50%");a("#"+this.player.getId()+"_"+this.config.loadedDomId).css("width","80%")}catch(b){}}this.pluginReady=true},itemHandler:function(b){this.pluginReady=true;this.hideControlbar(true)},updateControls:function(){var b=this;clearTimeout(this._controlHideTimer);if(this.player.getItemConfig("controls")==false){this.hideControlbar(true);return}var c=(this.player.getItemCount()<2||this.player.getItemConfig("disallowSkip"));if(!c){a("#"+this.player.getId()+"_"+this.config.prevDomId).show();a("#"+this.player.getId()+"_"+this.config.nextDomId).show()}else{a("#"+this.player.getId()+"_"+this.config.prevDomId).hide();a("#"+this.player.getId()+"_"+this.config.nextDomId).hide()}if(this.player.getItemIdx()<1){a("#"+this.player.getId()+"_"+this.config.prevDomId).hide()}if(this.player.getItemIdx()>=this.player.getItemCount()-1){a("#"+this.player.getId()+"_"+this.config.nextDomId).hide()}if(this.player.getItemConfig("disablePause")){a("#"+this.player.getId()+"_"+this.config.pauseDomId).hide();a("#"+this.player.getId()+"_"+this.config.playDomId).hide()}else{if(this.player.getState()==="PLAYING"){this.drawPauseButton()}if(this.player.getState()==="PAUSED"){this.drawPlayButton()}}if(this.player.getInFullscreen()===true){this.drawExitFullscreenButton()}else{this.drawEnterFullscreenButton()}if(this.player.getItemConfig("disableFullscreen")){a("#"+this.player.getId()+"_"+this.config.fsexitDomId).hide();a("#"+this.player.getId()+"_"+this.config.fsenterDomId).hide()}this.drawTitle(this.player.getItemConfig("title"));this.drawUpdateTimeDisplay();this.drawUpdateVolumeDisplay(this.player.getVolume())},stateHandler:function(b){if(b==="STOPPED"||b==="STARTING"||b=="AWAKENING"){this.hideControlbar(true);this.drawUpdateTimeDisplay(0,0,0)}else{this.updateControls();this.drawUpdateTimeDisplay();this.drawUpdateProgressDisplay()}},scheduleModifiedHandler:function(){if(this.player.getState()==="IDLE"){return}this.updateControls();this.drawUpdateTimeDisplay();this.drawUpdateProgressDisplay()},volumeHandler:function(b){this.drawUpdateVolumeDisplay(b)},progressHandler:function(b){this.drawUpdateProgressDisplay()},timeHandler:function(b){this.drawUpdateTimeDisplay();this.drawUpdateProgressDisplay()},fullscreenHandler:function(b){if(this.player.getState()!=="IDLE"){this._noControlHide=false;this.drawControls();this.addGuiListeners();this.updateControls()}},addGuiListeners:function(){var b=this;a("#"+this.player.getId()+"_"+this.config.controlsDomId).mouseenter(function(c){b.controlsMouseEnterListener(c)});a("#"+this.player.getId()+"_"+this.config.controlsDomId).mouseleave(function(c){b.controlsMouseLeaveListener(c)});a("#"+this.player.getId()+"_"+this.config.controlsDomId).click(function(c){b.controlsClickListener(c)});a("#"+this.player.getId()+"_"+this.config.controlsDomId).dblclick(function(c){return false});a("#"+this.player.getId()+"_"+this.config.playDomId).click(function(c){b.playClickListener(c)});a("#"+this.player.getId()+"_"+this.config.pauseDomId).click(function(c){b.pauseClickListener(c)});a("#"+this.player.getId()+"_"+this.config.vmaxDomId).click(function(c){b.unmuteClickListener(c)});a("#"+this.player.getId()+"_"+this.config.muteDomId).click(function(c){b.muteClickListener(c)});a("#"+this.player.getId()+"_"+this.config.vknobDomId).mousedown(function(c){b.vknobStartDragListener(c,this)});a("#"+this.player.getId()+"_"+this.config.vsliderDomId).click(function(c){b.vsliderClickListener(c,this)});a("#"+this.player.getId()+"_"+this.config.vmarkerDomId).click(function(c){b.vsliderClickListener(c,this)});a("#"+this.player.getId()+"_"+this.config.scrubberDomId).click(function(c){b.scrubberClickListener(c)});a("#"+this.player.getId()+"_"+this.config.fsexitDomId).click(function(c){b.exitFullscreenClickListener(c)});a("#"+this.player.getId()+"_"+this.config.fsenterDomId).click(function(c){b.enterFullscreenClickListener(c)});a("#"+this.player.getId()+"_"+this.config.prevDomId).click(function(c){b.prevClickListener(c)});a("#"+this.player.getId()+"_"+this.config.nextDomId).click(function(c){b.nextClickListener(c)});a("#"+this.player.getId()+"_"+this.config.draghandleDomId).mousedown(function(c){b.handleStartDragListener(c,this)})},drawControls:function(){var h=this;var f=this.player.getInFullscreen();var d=(f===true&&this.getItemConfig("controlsTemplateFull")!==false)?this.getItemConfig("controlsTemplateFull"):this.getItemConfig("controlsTemplate");var j=(f===true&&this.getItemConfig("controlsTemplateFull")!==false)?"_full":"";var g="";this._container.hide().html("").attr({id:this.player.getId()+"_"+this.config.controlsDomId,"class":this.player.getCssClass()+"controls"+j});var c=d.match(/\{[a-z]*\}/gi);var b="";for(var e=0;e<c.length;e++){b=c[e].replace("{","").replace("}","");g='id="'+this.player.getId()+"_"+b+'" class="'+this.player.getCssClass()+b+j+'"';d=d.replace("{"+b+"}",g)}this._container.html(d);this._timeTags={};this._grabTags(this._container);if(a.browser.mozilla){this._container.css("MozUserSelect","none")}else{if(a.browser.msie){this._container.bind("selectstart",function(){return false})}else{this._container.mousedown(function(){return false})}}if(this.getPlayerConfig("designMode")===true){this._container.show()}},drawTitle:function(d){var e=this.player.getId()+"_"+this.config.titleDomId;var c=this.player.getCssClass();var b=false;a("#"+e).html((b==false)?d:b)},hideControlbar:function(b){clearTimeout(this._controlHideTimer);if(this.getPlayerConfig("designMode")===true){return}if(this.getItemConfig("controlsDisableFade")===true&&b!==true){return}if(this._noControlHide==true&&this.getPlayerConfig("controls")==true&&b!==true){return}if(!this._container.is(":visible")){return}this._container.stop(true,true);if(this.getPlayerConfig("controls")==false){this._container.hide()}else{if(b==true){this._container.hide()}else{this._container.fadeOut("slow")}}},showControlbar:function(){var b=this;clearTimeout(this._controlHideTimer);if(this.player.getState()==="IDLE"){return}if(this.player.getState()==="ERROR"){return}if(this.player.getItemConfig("controls")==false){return}if(this.player.getIsAutoslide()==true){return}if(this._container.is(":visible")||this._controlsFading==true){b._controlHideTimer=setTimeout(function(){b.hideControlbar()},2500);return}this._controlsFading=true;this._container.stop(true,true);this._container.fadeIn("fast",function(){b._controlsFading=false})},drawUpdateTimeDisplay:function(m,c,l){try{var d=(m!=undefined)?m:this.player.getLoadPlaybackProgress();var f=(c!=undefined)?c:this.player.getDuration();var h=(l!=undefined)?l:this.player.getPosition()}catch(k){var d=m||0;var f=c||0;var h=l||0}var j=this.player.getCssClass();try{a("#"+this.player.getId()+"_"+this.config.playheadDomId).css("width",d+"%")}catch(k){}var b=a.extend({},this._clockDigits(f,"dur"),this._clockDigits(h,"elp"),this._clockDigits(f-h,"rem"));for(var g in this._timeTags){a("#"+g).html(this._parseTemplate(this._timeTags[g],b))}},drawUpdateProgressDisplay:function(){try{a("#"+this.player.getId()+"_"+this.config.loadedDomId).css("width",this.player.getLoadProgress()+"%")}catch(b){}},drawUpdateVolumeDisplay:function(d){if(this._volumeSliderActive==true){return}if(d==undefined){return}clearTimeout(this._controlHideTimer);var f=this._container.is(":visible");this._container.show();var e=this;var b=a("#"+this.player.getId()+"_"+this.config.vknobDomId);var c=a("#"+this.player.getId()+"_"+this.config.vsliderDomId);switch(d){case 0:a("#"+this.player.getId()+"_"+this.config.vknobDomId).css("left",0);break;case 1:a("#"+this.player.getId()+"_"+this.config.vknobDomId).css("left",(c.width()-(b.width()/2))+"px");break;default:a("#"+this.player.getId()+"_"+this.config.vknobDomId).css("left",d*(c.width()-(b.width()/2))+"px");break}a("#"+this.player.getId()+"_"+this.config.vmarkerDomId).css("width",d*100+"%");this.drawMuteIcon();this._controlHideTimer=setTimeout(function(){e.hideControlbar()},3500);if(!f){this._container.hide()}},drawPauseButton:function(b){a("#"+this.player.getId()+"_"+this.config.pauseDomId).show();a("#"+this.player.getId()+"_"+this.config.playDomId).hide()},drawPlayButton:function(b){a("#"+this.player.getId()+"_"+this.config.pauseDomId).hide();a("#"+this.player.getId()+"_"+this.config.playDomId).show()},drawEnterFullscreenButton:function(b){a("#"+this.player.getId()+"_"+this.config.fsexitDomId).hide();a("#"+this.player.getId()+"_"+this.config.fsenterDomId).show()},drawExitFullscreenButton:function(b){a("#"+this.player.getId()+"_"+this.config.fsenterDomId).hide();a("#"+this.player.getId()+"_"+this.config.fsexitDomId).show()},drawMuteIcon:function(c){if(this.getItemConfig("toggleMute")===false){return}var b=this.player.getVolume();if(b>0){a("#"+this.player.getId()+"_"+this.config.muteDomId).show();a("#"+this.player.getId()+"_"+this.config.vmaxDomId).hide();return}a("#"+this.player.getId()+"_"+this.config.muteDomId).hide();a("#"+this.player.getId()+"_"+this.config.vmaxDomId).show()},playClickListener:function(b){this.player.setPlay();if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},pauseClickListener:function(b){this.player.setPause();if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},controlsMouseEnterListener:function(b){this._noControlHide=true},controlsMouseLeaveListener:function(b){this._noControlHide=false},controlsClickListener:function(b){if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},mousemoveHandler:function(b){this.showControlbar()},mouseleaveHandler:function(b){var c=this;this._controlHideTimer=setTimeout(function(){c.hideControlbar()},2500)},prevClickListener:function(b){this.player.setActiveItem("previous");if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},nextClickListener:function(b){this.player.setActiveItem("next");if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},muteClickListener:function(b){this._preMuteVolume=this.player.getVolume();this.player.setVolume(0);if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},unmuteClickListener:function(b){this.player.setVolume(this._preMuteVolume);if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},enterFullscreenClickListener:function(b){this.player.setFullscreen(true);if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},exitFullscreenClickListener:function(b){this.player.setFullscreen(false);if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},startClickListener:function(b){this.player.setPlay();if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},scrubberClickListener:function(b){var e=0;if(b==undefined){return}if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}if(this.player.getItemConfig("disallowSkip")==true){return}var d=a("#"+this.player.getId()+"_"+this.config.scrubberDomId).width();var c=a("#"+this.player.getId()+"_"+this.config.loadedDomId).width();var f=b.pageX-a("#"+this.player.getId()+"_"+this.config.scrubberDomId).offset().left;if(f<0||f=="NaN"||f==undefined){e=0}else{if(c!=undefined){if(f>c){f=c-1}e=((f*100/d)*this.player.getDuration()/100)*1}}this.player.setPlayhead(e)},vmarkerClickListener:function(b){vsliderClickListener(b)},vsliderClickListener:function(b){if(this._volumeSliderActive==true){return}var c=a("#"+this.player.getId()+"_"+this.config.vsliderDomId).width();var d=b.pageX-a("#"+this.player.getId()+"_"+this.config.vsliderDomId).offset().left;if(d<0||d=="NaN"||d==undefined){result=0}else{result=(d/c)}this.player.setVolume(result);if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}},vknobStartDragListener:function(b,h){if(a.browser.msie){b.cancelBubble=true}else{b.stopPropagation()}this._volumeSliderActive=true;var d=this;var c=a(h);var g=a("#"+d.player.getId()+"_"+d.config.vsliderDomId);var k=Math.abs(parseInt(c.position().left)-b.clientX);var e=0;var f=function(l){if(a.browser.msie){l.cancelBubble=true}else{l.stopPropagation()}d._container.unbind("mousemove",j);d._container.unbind("mouseup",f);g.unbind("mousemove",j);g.unbind("mouseup",f);c.unbind("mousemove",j);c.unbind("mouseup",f);d._volumeSliderActive=false;return false};var j=function(l){clearTimeout(d._controlHideTimer);if(a.browser.msie){l.cancelBubble=true}else{l.stopPropagation()}var m=(l.clientX-k);m=(m>g.width()-c.width()/2)?g.width()-(c.width()/2):m;m=(m<0)?0:m;c.css("left",m+"px");e=Math.abs(m/(g.width()-(c.width()/2)));d.player.setVolume(e);a("#"+d.player.getId()+"_"+d.config.vmarkerDomId).css("width",e*100+"%");return false};this._container.mousemove(j);this._container.mouseup(f);g.mousemove(j);g.mouseup(f);c.mousemove(j);c.mouseup(f)},handleStartDragListener:function(d,g){var h=this;var f=Math.abs(parseInt(this._container.position().left)-d.clientX);var c=Math.abs(parseInt(this._container.position().top)-d.clientY);if(a.browser.msie){d.cancelBubble=true}else{d.stopPropagation()}var b=function(j){if(a.browser.msie){j.cancelBubble=true}else{j.stopPropagation()}h.playerDom.unbind("mouseup",b);h.playerDom.unbind("mouseout",b);h.playerDom.unbind("mousemove",e);return false};var e=function(k){if(a.browser.msie){k.cancelBubble=true}else{k.stopPropagation()}clearTimeout(h._controlHideTimer);var l=(k.clientX-f);l=(l>h.playerDom.width()-h._container.width())?h.playerDom.width()-h._container.width():l;l=(l<0)?0:l;h._container.css("left",l+"px");var j=(k.clientY-c);j=(j>h.playerDom.height()-h._container.height())?h.playerDom.height()-h._container.height():j;j=(j<0)?0:j;h._container.css("top",j+"px");return false};this.playerDom.mousemove(e);this.playerDom.mouseup(b)},errorHandler:function(b){this.hideControlbar(true)},_clockDigits:function(d,j){if(d<0||isNaN(d)||d==undefined){d=0}var f=Math.floor(d/(60*60));var g=d%(60*60);var c=Math.floor(g/60);var b=g%60;var e=Math.floor(b);var h={};h["min_"+j]=(c<10)?"0"+c:c;h["sec_"+j]=(e<10)?"0"+e:e;h["hr_"+j]=(f<10)?"0"+f:f;return h},_parseTemplate:function(b,d){for(var c in d){replacement='id="'+this.player.getId()+"_"+this.config[c]+'" class="'+this.player.getCssClass()+c.replace("DomId","")+'"';b=b.replace("{"+c+"}",d[c])}return b},_grabTags:function(d){var b=this;var c=function(){var e=a(this).html();if(e==""){return}if(a(this).attr("id")==""){return}if(a(this).children().length>0){b._grabTags(a(this));return}b._timeTags[a(this).attr("id")]=a(this).html()};d.children().each(c)}}});
/*
 * Projekktor II Plugin: Buffer-icon
 * VERSION: 1.0
 * DESC: Adds an indicator overlay to the center of the video display while bufferstate is EMPTY
 * Copyright 2010, Sascha Kluger, Spinning Airwhale Media, http://www.spinningairwhale.com
 *
 * under GNU General Public License
 * http://www.projekktor.com/license/
 */
var projekktorBufferingicon=function(){};jQuery(function(a){projekktorBufferingicon.prototype={_bufferingIcon:null,_bufferingIconSprite:null,_bufferDelayTimer:null,config:{bufferIconDelay:200,bufferingDomId:"buffering",spriteUrl:"",spriteWidth:50,spriteHeight:50,spriteTiles:25,spriteOffset:1,countUp:false},initialize:function(){this._bufferingIcon=a(document.createElement("div")).appendTo(this.canvas.media).attr({id:this.player.getId()+"_"+this.config.bufferingDomId,"class":this.player.getCssClass()+"buffering"}).hide();if(this.config.spriteUrl!=""){this._bufferingIconSprite=a(document.createElement("div")).appendTo(this._bufferingIcon).css({width:this.config.spriteWidth,height:this.config.spriteHeight,marginLeft:((this._bufferingIcon.width()-this.config.spriteWidth)/2)+"px",marginTop:((this._bufferingIcon.height()-this.config.spriteHeight)/2)+"px",backgroundColor:"transparent",backgroundImage:"url("+this.config.spriteUrl+")",backgroundRepeat:"no-repeat",backgroundPosition:"0 0"}).hide()}this.pluginReady=true},hideBufferIcon:function(){var b=this;clearTimeout(this._bufferDelayTimer);this._bufferingIcon.stop(true,true);this._bufferingIcon.fadeOut("fast")},showBufferIcon:function(b){var c=this;clearTimeout(this._bufferDelayTimer);if(this.player.getModel()==="YOUTUBE"){b=true}if(this._isWaiting==false&&b==false){return}if(b!=true&&this.config.bufferIconDelay>0){c._bufferDelayTimer=setTimeout(function(){c.showBufferIcon(true)},c.config.bufferIconDelay);return}this._bufferingIcon.stop(true,true);this._bufferingIcon.fadeIn("fast",function(){if(c._bufferingIconSprite==null){return}var d=(c.config.countUp==true)?0:(c.config.spriteHeight+c.config.spriteOffset)*c.config.spriteTiles;c._bufferingIconSprite.show();(function(){if(!c._bufferingIcon.is(":visible")){return}c._bufferingIconSprite.css("backgroundPosition","0px -"+d+"px");if(c.config.countUp==true){d+=c.config.spriteHeight+c.config.spriteOffset}else{d-=c.config.spriteHeight+c.config.spriteOffset}if(d>=c.config.spriteHeight*c.config.spriteTiles){d=0}setTimeout(arguments.callee,60)})()})},bufferHandler:function(b){if(b=="EMPTY"){this.showBufferIcon()}else{this.hideBufferIcon()}},scheduleLoadingHandler:function(){this.showBufferIcon()},scheduledHandler:function(){if(this.getPlayerConfig("designMode")!=true){this.hideBufferIcon()}},stateHandler:function(b){if(b=="AWAKENING"||b=="COMPLETED"){this.hideBufferIcon()}},itemHandler:function(){if(this.getPlayerConfig("designMode")!=true){this.hideBufferIcon()}else{this.showBufferIcon()}}}});
/*
 * Projekktor II Plugin: Startbutton
 * VERSION: 1.0
 * DESC: Adds a clickable graphic to the player while in IDLE mode. Starts player in click.
 * Copyright 2010, Sascha Kluger, Spinning Airwhale Media, http://www.spinningairwhale.com
 *
 * under GNU General Public License
 * http://www.projekktor.com/license/
 */
var projekktorStartbutton=function(){};jQuery(function(a){projekktorStartbutton.prototype={_startButton:null,config:{startDomId:"start"},initialize:function(){var b=this;this._startButton=a(document.createElement("div")).appendTo(this.canvas.media).attr({id:this.player.getId()+"_"+this.config.startDomId,"class":this.player.getCssClass()+"start"}).hide().click(function(){b.player.setPlay()});this.pluginReady=true},stateHandler:function(b){if(b==="IDLE"){this._startButton.show()}else{this._startButton.hide()}},scheduleLoadingHandler:function(){this._startButton.hide()},scheduledHandler:function(){if(!this.getPlayerConfig("autoplay")){this._startButton.show()}}}});